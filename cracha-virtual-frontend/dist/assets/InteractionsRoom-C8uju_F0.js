import{f as Z,aO as xe,r as C,p as pe,j as e,aB as be,B as j,v as W,h as ge,a as Se,a9 as Qe,af as Ze,e as Ne,X as Ke,n as Ye,aF as Xe,R as ye,L as he,C as Je,i as ea}from"./index-D96FZGJW.js";import{I as te}from"./input-DDdIEpJM.js";import{T as Te}from"./textarea-CEySCzb7.js";import{T as Ee,a as Ae,b as ie,c as de}from"./tabs-CkfKOB4p.js";import{B as oe}from"./badge-B3h_Dmat.js";import{C as Re,a as _e,b as Ie,d as Fe}from"./card-DGXvG8EM.js";import{L as ne}from"./label-MJqwl0kV.js";import{S as aa}from"./separator-D8luzwDT.js";import{M as se}from"./monitor-D-74F3bU.js";import{A as ta}from"./arrow-right-Dh0o9ikH.js";import{U as sa}from"./users-CtKWnKNz.js";import{P as Me}from"./plus-dvmosiY5.js";import{C as ra}from"./check-CcSBviJm.js";import{L as la}from"./link-Bf-7QkUf.js";import{E as Oe}from"./eye-off-CI6sPoxc.js";import{C as na,a as oa}from"./chevron-right-evuu7Lt6.js";import{S as ia,M as da}from"./sun-DwFsFBaE.js";import{A as Ce}from"./arrow-left-DuJ7_3jW.js";/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ca=[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]],ha=Z("gift",ca);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xa=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],ma=Z("hash",xa);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ua=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],pa=Z("info",ua);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ba=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],ga=Z("list",ba);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fa=[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]],va=Z("maximize-2",fa);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ka=[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]],wa=Z("play",ka);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ja=[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]],Na=Z("settings-2",ja);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ya=[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]],Pe=Z("thumbs-up",ya);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ma=[["path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17",key:"1q2vi4"}],["path",{d:"m10 15 5-3-5-3z",key:"1jp15x"}]],Ca=Z("youtube",Ma),Pa=({eventId:d})=>{const n=xe(),[l,f]=C.useState("numbers"),[_,E]=C.useState(!1),[N,R]=C.useState(null),[P,L]=C.useState(""),[v,A]=C.useState(1),[S,I]=C.useState(1),[O,D]=C.useState(100),[c,K]=C.useState(""),[B,G]=C.useState({sortResults:!0,countdown:!0,allowRepeat:!1}),{data:Y,isLoading:J}=pe({queryKey:["enrollments",d],queryFn:async()=>(await ge.getEnrollments(d)).data,enabled:l==="names"}),re=()=>{if(!Y)return;const p=Y.map(V=>V.user.name).join(`
`);K(p),W.success(`${Y.length} participantes importados!`)},ee=()=>{let p={type:l,quantity:parseInt(v),options:B};if(l==="numbers")p.min=parseInt(S),p.max=parseInt(O);else{const V=c.split(`
`).filter(s=>s.trim()!=="");if(V.length===0){W.error("A lista est√° vazia!");return}p.items=V,p.totalItems=V.length}n.emit("prepare_giveaway",{eventId:d,config:p,prize:P}),R({...p,prize:P}),E(!0),W.info("Configura√ß√£o enviada para o tel√£o!")},le=()=>{N&&(n.emit("start_giveaway",{eventId:d,config:N,prize:N.prize}),W.success("Sorteio iniciado!"))},ae=()=>{E(!1),R(null),n.emit("prepare_giveaway",{eventId:d,config:null})};return e.jsxs(Re,{className:"w-full shadow-2xl border-slate-200 dark:border-slate-800 bg-white dark:bg-[#0f1720] transition-colors",children:[e.jsx(_e,{className:"pb-3 border-b border-slate-100 dark:border-slate-800 bg-slate-50 dark:bg-slate-900/50 rounded-t-lg",children:e.jsxs(Ie,{className:"text-base font-semibold flex items-center justify-between text-slate-800 dark:text-slate-100",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"bg-yellow-500/10 p-1.5 rounded-full",children:e.jsx(be,{className:"w-4 h-4 text-yellow-500"})}),"Controle de Sorteio"]}),_&&e.jsx(oe,{variant:"secondary",className:"bg-emerald-500/10 text-emerald-500 animate-pulse border-emerald-500/20",children:"Pronto para Sortear"})]})}),e.jsx(Fe,{className:"pt-6 space-y-6",children:_?e.jsxs("div",{className:"text-center py-8 space-y-4",children:[e.jsx("div",{className:"mx-auto w-16 h-16 bg-blue-500/10 rounded-full flex items-center justify-center mb-4",children:e.jsx(se,{className:"w-8 h-8 text-blue-500"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] text-slate-400 dark:text-slate-500 uppercase tracking-[0.2em] font-black",children:"Valendo"}),e.jsx("p",{className:"text-3xl font-black text-slate-900 dark:text-white mt-1 drop-shadow-lg",children:P||"Sorteio Geral"})]}),e.jsx("div",{className:"bg-slate-50 dark:bg-slate-900/50 p-4 rounded-xl inline-block text-xs font-bold text-slate-500 dark:text-slate-400 border border-slate-200 dark:border-slate-800",children:N.type==="numbers"?e.jsxs("span",{className:"uppercase tracking-wider",children:[N.quantity," n√∫mero(s) entre ",e.jsx("b",{className:"text-blue-400",children:N.min})," e ",e.jsx("b",{className:"text-blue-400",children:N.max})]}):e.jsxs("span",{className:"uppercase tracking-wider",children:[N.quantity," vencedor(es) de ",e.jsx("b",{className:"text-purple-400",children:N.totalItems})," participantes"]})}),e.jsxs("div",{className:"flex gap-3 justify-center pt-4",children:[e.jsx(j,{variant:"outline",size:"lg",onClick:ae,className:"w-full md:w-auto bg-white dark:bg-transparent border-slate-200 dark:border-slate-800 text-slate-500 dark:text-slate-400 hover:bg-red-500/10 hover:text-red-500 hover:border-red-500/30 font-bold uppercase text-[11px] tracking-widest transition-all",children:"Cancelar"}),e.jsxs(j,{size:"lg",className:"w-full md:w-auto bg-emerald-600 hover:bg-emerald-700 text-white shadow-xl shadow-emerald-900/20 font-bold uppercase text-[11px] tracking-widest",onClick:le,children:[e.jsx(wa,{className:"w-4 h-4 mr-2 fill-current"})," INICIAR SORTEIO"]})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ne,{htmlFor:"prize",className:"text-[10px] font-black text-slate-400 dark:text-slate-500 uppercase tracking-[0.1em]",children:"Pr√™mio / T√≠tulo (Opcional)"}),e.jsx(te,{id:"prize",placeholder:"Ex: Livro, Pix de R$50, Brinde Especial...",value:P,onChange:p=>L(p.target.value),className:"h-12 text-lg border-slate-200 dark:border-slate-800 bg-slate-50 dark:bg-black/20 focus:border-blue-500 text-slate-800 dark:text-slate-100 placeholder:text-slate-400 dark:placeholder:text-slate-600 transition-all rounded-xl"})]}),e.jsxs(Ee,{value:l,onValueChange:f,className:"w-full",children:[e.jsxs(Ae,{className:"grid w-full grid-cols-2 mb-6 h-12 bg-slate-100 dark:bg-black/40 border border-slate-200 dark:border-slate-800 p-1 rounded-xl",children:[e.jsxs(ie,{value:"numbers",className:"rounded-lg data-[state=active]:bg-white dark:data-[state=active]:bg-slate-800 data-[state=active]:text-blue-600 dark:data-[state=active]:text-blue-400 data-[state=active]:shadow-md font-bold gap-2 text-xs uppercase tracking-wider transition-all",children:[e.jsx(ma,{className:"w-4 h-4"})," N√∫meros"]}),e.jsxs(ie,{value:"names",className:"rounded-lg data-[state=active]:bg-white dark:data-[state=active]:bg-slate-800 data-[state=active]:text-purple-600 dark:data-[state=active]:text-purple-400 data-[state=active]:shadow-md font-bold gap-2 text-xs uppercase tracking-wider transition-all",children:[e.jsx(ga,{className:"w-4 h-4"})," Nomes / Lista"]})]}),e.jsx(de,{value:"numbers",className:"space-y-6 animate-in slide-in-from-left-2 duration-300",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ne,{className:"text-[10px] font-black text-slate-400 dark:text-slate-500 uppercase tracking-widest",children:"Quantidade de Vencedores"}),e.jsxs("div",{className:"relative",children:[e.jsx(te,{type:"number",value:v,onChange:p=>A(p.target.value),className:"pl-4 text-center text-xl font-black h-14 border-slate-200 dark:border-slate-800 bg-slate-50 dark:bg-black/20 text-slate-900 dark:text-white rounded-xl",min:1}),e.jsx("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-slate-400 dark:text-slate-600 text-[10px] font-black uppercase pointer-events-none",children:"Participantes"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ne,{className:"text-[10px] font-black text-slate-400 dark:text-slate-500 uppercase tracking-widest",children:"Intervalo do Sorteio"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 dark:text-slate-600 text-[10px] font-black uppercase",children:"De"}),e.jsx(te,{type:"number",value:S,onChange:p=>I(p.target.value),className:"pl-10 text-center font-bold h-14 border-slate-200 dark:border-slate-800 bg-slate-50 dark:bg-black/20 text-slate-900 dark:text-white rounded-xl"})]}),e.jsx(ta,{className:"w-4 h-4 text-slate-300 dark:text-slate-700"}),e.jsxs("div",{className:"relative flex-1",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 dark:text-slate-600 text-[10px] font-black uppercase",children:"At√©"}),e.jsx(te,{type:"number",value:O,onChange:p=>D(p.target.value),className:"pl-10 text-center font-bold h-14 border-slate-200 dark:border-slate-800 bg-slate-50 dark:bg-black/20 text-slate-900 dark:text-white rounded-xl"})]})]})]})]})}),e.jsxs(de,{value:"names",className:"space-y-5 animate-in slide-in-from-right-2 duration-300",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3",children:[e.jsx(ne,{className:"text-[10px] font-black text-slate-400 dark:text-slate-500 uppercase tracking-widest",children:"Lista de Itens (um por linha)"}),e.jsxs(j,{variant:"outline",size:"sm",className:"h-9 text-[10px] font-black uppercase tracking-wider border-slate-800 text-blue-400 bg-blue-500/5 hover:bg-blue-500/10 hover:border-blue-500/30",onClick:re,disabled:J,children:[e.jsx(sa,{className:"w-3.5 h-3.5 mr-2"})," Importar Inscritos"]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(Te,{value:c,onChange:p=>K(p.target.value),placeholder:"Digite ou cole os nomes aqui...",rows:6,className:"bg-slate-50 dark:bg-black/20 min-h-[150px] font-mono text-sm border-slate-200 dark:border-slate-800 text-slate-800 dark:text-slate-200 focus:border-purple-500/50 placeholder:text-slate-300 dark:placeholder:text-slate-700 scrollbar-thin scrollbar-thumb-slate-200 dark:scrollbar-thumb-slate-800 rounded-xl"}),e.jsxs("div",{className:"absolute bottom-3 right-3 text-[10px] font-black uppercase bg-white/80 dark:bg-slate-800/80 backdrop-blur px-2 py-1 rounded border border-slate-100 dark:border-slate-700 text-slate-500 dark:text-slate-400",children:[c?c.split(`
`).filter(p=>p.trim()).length:0," itens"]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ne,{className:"text-[10px] font-black text-slate-400 dark:text-slate-500 uppercase tracking-widest w-24",children:"Vencedores:"}),e.jsx(te,{type:"number",value:v,onChange:p=>A(p.target.value),className:"w-24 h-9 text-center font-bold bg-slate-50 dark:bg-black/20 border-slate-200 dark:border-slate-800 text-slate-900 dark:text-white rounded-lg",min:1})]})]})]}),e.jsx(aa,{className:"bg-slate-800"}),e.jsxs("div",{className:"bg-slate-50 dark:bg-black/20 p-5 rounded-xl border border-slate-100 dark:border-slate-800 space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-slate-500 dark:text-slate-400 font-black text-[10px] uppercase tracking-[0.2em] mb-4",children:[e.jsx(Na,{className:"w-4 h-4 text-blue-500"})," Op√ß√µes do Sorteio"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-xl hover:bg-white/5 transition-all cursor-pointer group border border-transparent hover:border-slate-800/50",children:[e.jsx("div",{className:"relative flex items-center",children:e.jsx("input",{type:"checkbox",checked:B.sortResults,onChange:p=>G({...B,sortResults:p.target.checked}),className:"peer h-4 w-4 rounded border-slate-700 bg-slate-900 text-blue-500 focus:ring-blue-500/20"})}),e.jsx("span",{className:"text-xs font-medium text-slate-400 group-hover:text-slate-200",children:"Ordenar resultados (Crescente / A-Z)"})]}),e.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-xl hover:bg-white/5 transition-all cursor-pointer group border border-transparent hover:border-slate-800/50",children:[e.jsx("div",{className:"relative flex items-center",children:e.jsx("input",{type:"checkbox",checked:B.countdown,onChange:p=>G({...B,countdown:p.target.checked}),className:"peer h-4 w-4 rounded border-slate-700 bg-slate-900 text-blue-500 focus:ring-blue-500/20"})}),e.jsx("span",{className:"text-xs font-medium text-slate-400 group-hover:text-slate-200",children:"Adicionar contagem regressiva (Suspense)"})]}),e.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-xl hover:bg-white/5 transition-all cursor-pointer group border border-transparent hover:border-slate-800/50",children:[e.jsx("div",{className:"relative flex items-center",children:e.jsx("input",{type:"checkbox",checked:B.allowRepeat,onChange:p=>G({...B,allowRepeat:p.target.checked}),className:"peer h-4 w-4 rounded border-slate-700 bg-slate-900 text-blue-500 focus:ring-blue-500/20"})}),e.jsx("span",{className:"text-xs font-medium text-slate-400 group-hover:text-slate-200",children:"Permitir repeti√ß√£o (mesmo n√∫mero/nome)"})]})]})]}),e.jsxs(j,{className:"w-full h-14 text-sm font-black uppercase tracking-[0.2em] bg-blue-600 hover:bg-blue-700 text-white shadow-[0_0_20px_rgba(37,99,235,0.15)] mt-4 rounded-xl transition-all",onClick:ee,children:[e.jsx(se,{className:"w-5 h-5 mr-3"}),"Preparar Tela"]})]})})]})},Sa=({eventId:d,isEnrollmentApproved:n})=>{var V;const l=xe(),{user:f}=Se(),[_,E]=C.useState([]),[N,R]=C.useState(""),[P,L]=C.useState(""),[v,A]=C.useState("youtube"),[S,I]=C.useState(null),[O,D]=C.useState(!1),c=(f==null?void 0:f.role)==="ADMIN"||(f==null?void 0:f.role)==="SPEAKER"||(f==null?void 0:f.role)==="ORGANIZER";C.useEffect(()=>!l||!d?void 0:(l.emit("join_event_room",{eventId:d,user:f}),(async()=>{try{const b=await ge.getQuestions(d);E(b.data)}catch(b){console.error("Failed to load questions",b)}})(),l.on("question_received",b=>{E(z=>[b,...z])}),l.on("question_updated",b=>{E(z=>z.map($=>$.id===b.id?b:$))}),l.on("question_highlighted",b=>{E(z=>z.map($=>({...$,isHighlighted:b?$.id===b.id:!1})))}),l.on("media_highlighted",b=>{console.log("[SOCKET] M√≠dia em destaque atualizada:",b),I(b)}),()=>{l.off("question_received"),l.off("question_updated"),l.off("question_highlighted"),l.off("media_highlighted")}),[l,d,f]);const K=s=>{!l||!d||l.emit("slide_action",{eventId:d,action:s})},B=()=>{if(N.trim()){if(!n&&!c){W.error("Voc√™ precisa estar inscrito e aprovado para enviar perguntas.");return}l.emit("new_question",{eventId:d,userId:f.id,text:N}),R(""),W.success("Pergunta enviada!")}},G=s=>{l.emit("vote_question",{questionId:s,eventId:d})},Y=s=>{l.emit("highlight_question",{questionId:s,eventId:d})},J=(s,b)=>{l.emit("toggle_approval",{questionId:s,eventId:d,isApproved:!b})},re=async s=>{const b=s.target.files[0];if(!b||!d)return;D(!0);const z=new FormData;z.append("presentation",b);try{const ce=(await Ne.post(`/events/${d}/presentation`,z,{headers:{"Content-Type":"multipart/form-data"}})).data.url;ee(ce,"pdf"),W.success("Apresenta√ß√£o carregada!")}catch($){console.error("Erro no upload:",$),W.error("Falha ao subir arquivo.")}finally{D(!1)}},ee=(s=P,b=v)=>{if(!s.trim())return;const z={eventId:d,media:{type:b,url:s}};l.emit("highlight_media",z),b!=="pdf"&&L(""),W.success("M√≠dia enviada para o tel√£o!")},le=async()=>{var s;if(!(!l||!d)){if((S==null?void 0:S.type)==="pdf"&&((s=S==null?void 0:S.url)!=null&&s.includes("/uploads/presentations/")))try{await Ne.delete(`/events/${d}/presentation`,{data:{url:S.url}})}catch(b){console.warn("[CLEANUP] Erro ao limpar arquivo:",b)}l.emit("highlight_media",{eventId:d,media:null}),W.info("Limpando m√≠dia...")}},ae=c?[..._]:_.filter(s=>s.userId===(f==null?void 0:f.id)),p=ae.sort((s,b)=>s.isHighlighted?-1:b.isHighlighted?1:s.votes!==b.votes?b.votes-s.votes:new Date(b.createdAt)-new Date(s.createdAt));return e.jsx("div",{className:"space-y-8 animate-in fade-in duration-500",children:e.jsxs(Ee,{defaultValue:"questions",className:"w-full",children:[e.jsxs(Ae,{className:`grid w-full ${c?"grid-cols-3":"grid-cols-1"} bg-slate-100 dark:bg-[#0f1720] border border-slate-200 dark:border-slate-800 p-1 rounded-xl h-12`,children:[e.jsxs(ie,{value:"questions",className:"rounded-lg data-[state=active]:bg-white dark:data-[state=active]:bg-slate-800 data-[state=active]:text-slate-900 dark:data-[state=active]:text-white gap-2 transition-all shadow-sm data-[state=active]:shadow-md",children:[e.jsx(Qe,{className:"w-4 h-4"})," Perguntas",e.jsx(oe,{variant:"secondary",className:"ml-1 bg-slate-200 dark:bg-slate-700 text-slate-600 dark:text-slate-300 border-none px-1.5 h-5 min-w-[20px]",children:ae.length})]}),c&&e.jsxs(ie,{value:"giveaway",className:"rounded-lg data-[state=active]:bg-white dark:data-[state=active]:bg-slate-800 data-[state=active]:text-slate-900 dark:data-[state=active]:text-white gap-2 transition-all",children:[e.jsx(be,{className:"w-4 h-4"})," Sorteios"]}),c&&e.jsxs(ie,{value:"media",className:"rounded-lg data-[state=active]:bg-white dark:data-[state=active]:bg-slate-800 data-[state=active]:text-slate-900 dark:data-[state=active]:text-white gap-2 transition-all",children:[e.jsx(Me,{className:"w-4 h-4"})," M√≠dias"]})]}),e.jsxs(de,{value:"questions",className:"space-y-6 pt-6",children:[e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"absolute -inset-0.5 bg-gradient-to-r from-blue-500 to-purple-600 rounded-2xl blur opacity-10 group-focus-within:opacity-25 transition duration-500"}),e.jsxs("div",{className:"relative bg-white dark:bg-[#0f1720] rounded-xl border border-slate-200 dark:border-slate-800 overflow-hidden shadow-sm",children:[e.jsx(Te,{placeholder:"Enviar mensagem para o Visualizador...",className:"resize-none border-none bg-transparent focus-visible:ring-0 text-slate-800 dark:text-slate-100 placeholder:text-slate-400 dark:placeholder:text-slate-500 p-5 min-h-[100px]",value:N,onChange:s=>R(s.target.value),onKeyDown:s=>{s.key==="Enter"&&!s.shiftKey&&(s.preventDefault(),B())}}),e.jsxs("div",{className:"p-3 border-t border-slate-100 dark:border-slate-800/50 flex justify-between items-center bg-slate-50 dark:bg-slate-900/30",children:[e.jsx("span",{className:"text-[10px] text-slate-600 font-bold uppercase tracking-wider ml-2",children:"Dica: Enter para enviar r√°pidas"}),e.jsx(j,{size:"sm",className:"bg-purple-600 hover:bg-purple-700 text-white px-6 font-bold shadow-lg shadow-purple-900/20",onClick:B,children:"Enviar"})]})]})]}),e.jsx("div",{className:"space-y-4",children:p.length===0?e.jsx("div",{className:"text-center py-16 bg-[#0f1720] rounded-xl border border-dashed border-slate-800 text-slate-500 font-medium",children:"Nenhuma pergunta no momento."}):p.map(s=>{var b;return e.jsx("div",{className:`relative group transition-all duration-300 ${s.isHighlighted?"bg-emerald-500/5 dark:bg-emerald-500/10 border-emerald-500/30 ring-1 ring-emerald-500/20":"bg-white dark:bg-[#0f1720] border-slate-200 dark:border-slate-800 hover:border-blue-400 dark:hover:border-slate-700"} p-5 rounded-2xl border flex flex-col gap-4 shadow-sm hover:shadow-md`,children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1 space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[s.isHighlighted&&e.jsxs(oe,{className:"bg-emerald-500 text-white dark:text-[#0a0f14] font-black animate-pulse flex gap-1.5 items-center px-2",children:[e.jsx(ra,{className:"w-3 h-3"})," NO TEL√ÉO"]}),!s.isApproved&&c&&e.jsx(oe,{variant:"outline",className:"border-orange-500/50 text-orange-500 font-bold",children:"PENDENTE"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-bold text-slate-700 dark:text-slate-300",children:((b=s.user)==null?void 0:b.name)||"An√¥nimo"}),e.jsx("span",{className:"w-1 h-1 rounded-full bg-slate-300 dark:bg-slate-700"}),e.jsx("span",{className:"text-[11px] text-slate-400 dark:text-slate-600 font-medium",children:new Date(s.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]}),e.jsx("p",{className:"text-lg md:text-xl font-medium text-slate-800 dark:text-slate-100 leading-snug",children:s.text})]}),e.jsx("div",{className:"flex items-center gap-2",children:c?e.jsx("div",{className:"flex items-center gap-1 bg-slate-50 dark:bg-black/20 p-1 rounded-lg border border-slate-200 dark:border-slate-800",children:s.isApproved?e.jsxs("div",{className:"flex items-center",children:[e.jsxs(j,{variant:"ghost",size:"sm",className:`h-8 text-[11px] font-black uppercase gap-1.5 ${s.isHighlighted?"text-blue-400 bg-blue-500/10":"text-slate-400 hover:text-white"}`,onClick:()=>Y(s.isHighlighted?null:s.id),children:[e.jsx(se,{className:"w-3.5 h-3.5"}),s.isHighlighted?"Remover":"Projetar"]}),e.jsx("div",{className:"w-px h-4 bg-slate-800 mx-1"}),e.jsxs(j,{variant:"ghost",size:"sm",className:"h-8 px-2 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-lg text-slate-400",onClick:()=>G(s.id),children:[e.jsx(Pe,{className:`w-4 h-4 ${s.votes>0?"text-blue-600 fill-blue-600":""}`}),e.jsx("span",{className:"ml-1.5 text-xs font-bold",children:s.votes||0})]})]}):e.jsxs(e.Fragment,{children:[e.jsx(j,{variant:"ghost",size:"sm",className:"h-8 text-[11px] font-black uppercase text-emerald-500 hover:bg-emerald-500/10 hover:text-emerald-400 gap-1.5",onClick:()=>J(s.id,!1),children:"Aprovar"}),e.jsx("div",{className:"w-px h-4 bg-slate-800"}),e.jsx(j,{variant:"ghost",size:"sm",className:"h-8 text-[11px] font-black uppercase text-red-500 hover:bg-red-500/10 hover:text-red-400 gap-1.5",onClick:()=>J(s.id,!0),children:"Rejeitar"})]})}):e.jsxs("div",{className:"flex flex-col items-center justify-center py-2 px-3 bg-slate-50 dark:bg-slate-900/50 rounded-xl border border-slate-100 dark:border-slate-800/50",children:[e.jsx(Pe,{className:`w-5 h-5 ${s.votes>0?"text-blue-600 dark:text-blue-500 fill-blue-500":"text-slate-300 dark:text-slate-700"}`}),e.jsx("span",{className:"text-xs font-bold mt-1 text-slate-500 dark:text-slate-400",children:s.votes||0})]})})]})},s.id)})})]}),c&&e.jsxs(e.Fragment,{children:[e.jsx(de,{value:"giveaway",className:"pt-6",children:e.jsx(Pa,{eventId:d})}),e.jsx(de,{value:"media",className:"space-y-6 pt-6 animate-in slide-in-from-bottom-2",children:e.jsxs(Re,{className:"bg-white dark:bg-[#0f1720] border-slate-200 dark:border-slate-800 shadow-sm transition-colors",children:[e.jsx(_e,{children:e.jsxs(Ie,{className:"text-sm font-bold text-slate-500 dark:text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[e.jsx(se,{className:"w-4 h-4 text-blue-500"})," Controle de Exibi√ß√£o"]})}),e.jsxs(Fe,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsxs(j,{variant:v==="youtube"?"default":"outline",className:`flex-col gap-2 h-24 dark:h-20 bg-slate-50 dark:bg-slate-800/50 border-slate-200 dark:border-slate-700 ${v==="youtube"?"bg-red-600 border-red-500 text-white hover:bg-red-700":"text-slate-500 dark:text-slate-400"}`,onClick:()=>A("youtube"),children:[e.jsx(Ca,{className:"w-6 h-6"}),e.jsx("span",{className:"text-[10px] font-black uppercase",children:"YouTube"})]}),e.jsxs(j,{variant:v==="pdf"?"default":"outline",className:`flex-col gap-2 h-24 dark:h-20 bg-slate-50 dark:bg-slate-800/50 border-slate-200 dark:border-slate-700 ${v==="pdf"?"bg-blue-600 border-blue-500 text-white hover:bg-blue-700":"text-slate-500 dark:text-slate-400"}`,onClick:()=>A("pdf"),children:[e.jsx(Ze,{className:"w-6 h-6"}),e.jsx("span",{className:"text-[10px] font-black uppercase",children:"PDF/PPT"})]}),e.jsxs(j,{variant:v==="web"?"default":"outline",className:`flex-col gap-2 h-24 dark:h-20 bg-slate-50 dark:bg-slate-800/50 border-slate-200 dark:border-slate-700 ${v==="web"?"bg-emerald-600 border-emerald-500 text-white hover:bg-emerald-700":"text-slate-500 dark:text-slate-400"}`,onClick:()=>A("web"),children:[e.jsx(la,{className:"w-6 h-6"}),e.jsx("span",{className:"text-[10px] font-black uppercase",children:"Web Link"})]})]}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-black text-slate-400 dark:text-slate-500 uppercase tracking-widest",children:"URL do Conte√∫do"}),e.jsxs("div",{className:"flex gap-2",children:[v==="pdf"?e.jsxs("div",{className:"flex-1",children:[e.jsx("input",{type:"file",id:"presentation-upload",className:"hidden",accept:".pdf,.ppt,.pptx",onChange:re,disabled:O}),e.jsxs(j,{variant:"outline",className:"w-full h-12 border-dashed border-2 border-slate-300 dark:border-slate-700 bg-slate-50 dark:bg-black/40 text-slate-600 dark:text-slate-400 font-bold gap-2 hover:border-blue-500 hover:text-blue-500 transition-all",onClick:()=>document.getElementById("presentation-upload").click(),disabled:O,children:[e.jsx(Me,{className:"w-5 h-5"}),O?"Subindo...":"Selecionar PDF/PPT da Apresenta√ß√£o"]})]}):e.jsx(te,{placeholder:v==="youtube"?"https://youtube.com/watch?v=...":"https://exemplo.com",className:"bg-slate-50 dark:bg-black/40 border-slate-200 dark:border-slate-800 text-slate-800 dark:text-slate-200 h-12 rounded-xl focus:ring-blue-500 transition-all",value:P,onChange:s=>L(s.target.value)}),v!=="pdf"&&e.jsx(j,{className:"bg-blue-600 hover:bg-blue-700 h-12 px-8 font-bold shadow-lg shadow-blue-900/20",onClick:()=>ee(),children:"Projetar"}),e.jsx(j,{variant:"outline",className:"border-red-200 dark:border-red-900/30 text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-950/20 h-12 px-4",onClick:le,children:e.jsx(Oe,{className:"w-4 h-4"})})]})]})}),S&&e.jsx("div",{className:"pt-4 border-t border-slate-100 dark:border-slate-800 animate-in fade-in slide-in-from-top-4 duration-500",children:e.jsxs("div",{className:"bg-slate-900 dark:bg-black rounded-2xl p-6 shadow-xl border border-blue-500/30",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[10px] font-black text-blue-500 uppercase tracking-[0.2em] mb-1",children:"Controle de Slides"}),e.jsx("h4",{className:"text-sm font-bold text-white truncate max-w-[200px]",children:((V=S.url)==null?void 0:V.split("/").pop())||"Apresenta√ß√£o Ativa"})]}),e.jsx(oe,{variant:"outline",className:"bg-blue-500 text-white border-none animate-pulse",children:"AO VIVO"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs(j,{variant:"outline",className:"h-20 bg-slate-800 hover:bg-slate-700 border-slate-700 text-white flex flex-col gap-2 rounded-2xl transition-all active:scale-95",onClick:()=>K("prev"),children:[e.jsx(na,{className:"w-8 h-8"}),e.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest",children:"Anterior"})]}),e.jsxs(j,{className:"h-20 bg-blue-600 hover:bg-blue-500 text-white flex flex-col gap-2 rounded-2xl shadow-lg shadow-blue-900/40 transition-all active:scale-95",onClick:()=>K("next"),children:[e.jsx(oa,{className:"w-8 h-8"}),e.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest font-mono",children:"PR√ìXIMO"})]})]}),e.jsxs("div",{className:"mt-4 flex items-center justify-center gap-2 text-slate-500 text-[10px] font-medium uppercase tracking-widest",children:[e.jsx(va,{className:"w-3 h-3"}),"Dica: Use no modo paisagem no celular"]})]})}),e.jsxs("div",{className:"bg-blue-50/50 dark:bg-slate-900/50 p-4 rounded-xl border border-blue-100 dark:border-slate-800 flex items-start gap-4 transition-colors",children:[e.jsx("div",{className:"bg-blue-500/10 p-2 rounded-lg",children:e.jsx(pa,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("h4",{className:"text-xs font-bold text-slate-700 dark:text-slate-300",children:"Como funciona?"}),e.jsx("p",{className:"text-[11px] text-slate-600 dark:text-slate-500 leading-relaxed",children:"Ao projetar uma m√≠dia, o tel√£o principal ser√° substitu√≠do pelo conte√∫do do link. Certifique-se de que o link √© p√∫blico ou incorpor√°vel (como YouTube e Google Slides)."})]})]})]})]})})]})]})})};var fe={};(function d(n,l,f,_){var E=!!(n.Worker&&n.Blob&&n.Promise&&n.OffscreenCanvas&&n.OffscreenCanvasRenderingContext2D&&n.HTMLCanvasElement&&n.HTMLCanvasElement.prototype.transferControlToOffscreen&&n.URL&&n.URL.createObjectURL),N=typeof Path2D=="function"&&typeof DOMMatrix=="function",R=(function(){if(!n.OffscreenCanvas)return!1;try{var t=new OffscreenCanvas(1,1),a=t.getContext("2d");a.fillRect(0,0,1,1);var r=t.transferToImageBitmap();a.createPattern(r,"no-repeat")}catch{return!1}return!0})();function P(){}function L(t){var a=l.exports.Promise,r=a!==void 0?a:n.Promise;return typeof r=="function"?new r(t):(t(P,P),null)}var v=(function(t,a){return{transform:function(r){if(t)return r;if(a.has(r))return a.get(r);var i=new OffscreenCanvas(r.width,r.height),h=i.getContext("2d");return h.drawImage(r,0,0),a.set(r,i),i},clear:function(){a.clear()}}})(R,new Map),A=(function(){var t=Math.floor(16.666666666666668),a,r,i={},h=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(a=function(x){var m=Math.random();return i[m]=requestAnimationFrame(function o(u){h===u||h+t-1<u?(h=u,delete i[m],x()):i[m]=requestAnimationFrame(o)}),m},r=function(x){i[x]&&cancelAnimationFrame(i[x])}):(a=function(x){return setTimeout(x,t)},r=function(x){return clearTimeout(x)}),{frame:a,cancel:r}})(),S=(function(){var t,a,r={};function i(h){function x(m,o){h.postMessage({options:m||{},callback:o})}h.init=function(o){var u=o.transferControlToOffscreen();h.postMessage({canvas:u},[u])},h.fire=function(o,u,k){if(a)return x(o,null),a;var y=Math.random().toString(36).slice(2);return a=L(function(w){function M(T){T.data.callback===y&&(delete r[y],h.removeEventListener("message",M),a=null,v.clear(),k(),w())}h.addEventListener("message",M),x(o,y),r[y]=M.bind(null,{data:{callback:y}})}),a},h.reset=function(){h.postMessage({reset:!0});for(var o in r)r[o](),delete r[o]}}return function(){if(t)return t;if(!f&&E){var h=["var CONFETTI, SIZE = {}, module = {};","("+d.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{t=new Worker(URL.createObjectURL(new Blob([h])))}catch(x){return typeof console<"u"&&typeof console.warn=="function"&&console.warn("üéä Could not load worker",x),null}i(t)}return t}})(),I={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function O(t,a){return a?a(t):t}function D(t){return t!=null}function c(t,a,r){return O(t&&D(t[a])?t[a]:I[a],r)}function K(t){return t<0?0:Math.floor(t)}function B(t,a){return Math.floor(Math.random()*(a-t))+t}function G(t){return parseInt(t,16)}function Y(t){return t.map(J)}function J(t){var a=String(t).replace(/[^0-9a-f]/gi,"");return a.length<6&&(a=a[0]+a[0]+a[1]+a[1]+a[2]+a[2]),{r:G(a.substring(0,2)),g:G(a.substring(2,4)),b:G(a.substring(4,6))}}function re(t){var a=c(t,"origin",Object);return a.x=c(a,"x",Number),a.y=c(a,"y",Number),a}function ee(t){t.width=document.documentElement.clientWidth,t.height=document.documentElement.clientHeight}function le(t){var a=t.getBoundingClientRect();t.width=a.width,t.height=a.height}function ae(t){var a=document.createElement("canvas");return a.style.position="fixed",a.style.top="0px",a.style.left="0px",a.style.pointerEvents="none",a.style.zIndex=t,a}function p(t,a,r,i,h,x,m,o,u){t.save(),t.translate(a,r),t.rotate(x),t.scale(i,h),t.arc(0,0,1,m,o,u),t.restore()}function V(t){var a=t.angle*(Math.PI/180),r=t.spread*(Math.PI/180);return{x:t.x,y:t.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:t.startVelocity*.5+Math.random()*t.startVelocity,angle2D:-a+(.5*r-Math.random()*r),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:t.color,shape:t.shape,tick:0,totalTicks:t.ticks,decay:t.decay,drift:t.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:t.gravity*3,ovalScalar:.6,scalar:t.scalar,flat:t.flat}}function s(t,a){a.x+=Math.cos(a.angle2D)*a.velocity+a.drift,a.y+=Math.sin(a.angle2D)*a.velocity+a.gravity,a.velocity*=a.decay,a.flat?(a.wobble=0,a.wobbleX=a.x+10*a.scalar,a.wobbleY=a.y+10*a.scalar,a.tiltSin=0,a.tiltCos=0,a.random=1):(a.wobble+=a.wobbleSpeed,a.wobbleX=a.x+10*a.scalar*Math.cos(a.wobble),a.wobbleY=a.y+10*a.scalar*Math.sin(a.wobble),a.tiltAngle+=.1,a.tiltSin=Math.sin(a.tiltAngle),a.tiltCos=Math.cos(a.tiltAngle),a.random=Math.random()+2);var r=a.tick++/a.totalTicks,i=a.x+a.random*a.tiltCos,h=a.y+a.random*a.tiltSin,x=a.wobbleX+a.random*a.tiltCos,m=a.wobbleY+a.random*a.tiltSin;if(t.fillStyle="rgba("+a.color.r+", "+a.color.g+", "+a.color.b+", "+(1-r)+")",t.beginPath(),N&&a.shape.type==="path"&&typeof a.shape.path=="string"&&Array.isArray(a.shape.matrix))t.fill(ze(a.shape.path,a.shape.matrix,a.x,a.y,Math.abs(x-i)*.1,Math.abs(m-h)*.1,Math.PI/10*a.wobble));else if(a.shape.type==="bitmap"){var o=Math.PI/10*a.wobble,u=Math.abs(x-i)*.1,k=Math.abs(m-h)*.1,y=a.shape.bitmap.width*a.scalar,w=a.shape.bitmap.height*a.scalar,M=new DOMMatrix([Math.cos(o)*u,Math.sin(o)*u,-Math.sin(o)*k,Math.cos(o)*k,a.x,a.y]);M.multiplySelf(new DOMMatrix(a.shape.matrix));var T=t.createPattern(v.transform(a.shape.bitmap),"no-repeat");T.setTransform(M),t.globalAlpha=1-r,t.fillStyle=T,t.fillRect(a.x-y/2,a.y-w/2,y,w),t.globalAlpha=1}else if(a.shape==="circle")t.ellipse?t.ellipse(a.x,a.y,Math.abs(x-i)*a.ovalScalar,Math.abs(m-h)*a.ovalScalar,Math.PI/10*a.wobble,0,2*Math.PI):p(t,a.x,a.y,Math.abs(x-i)*a.ovalScalar,Math.abs(m-h)*a.ovalScalar,Math.PI/10*a.wobble,0,2*Math.PI);else if(a.shape==="star")for(var g=Math.PI/2*3,F=4*a.scalar,U=8*a.scalar,q=a.x,Q=a.y,X=5,H=Math.PI/X;X--;)q=a.x+Math.cos(g)*U,Q=a.y+Math.sin(g)*U,t.lineTo(q,Q),g+=H,q=a.x+Math.cos(g)*F,Q=a.y+Math.sin(g)*F,t.lineTo(q,Q),g+=H;else t.moveTo(Math.floor(a.x),Math.floor(a.y)),t.lineTo(Math.floor(a.wobbleX),Math.floor(h)),t.lineTo(Math.floor(x),Math.floor(m)),t.lineTo(Math.floor(i),Math.floor(a.wobbleY));return t.closePath(),t.fill(),a.tick<a.totalTicks}function b(t,a,r,i,h){var x=a.slice(),m=t.getContext("2d"),o,u,k=L(function(y){function w(){o=u=null,m.clearRect(0,0,i.width,i.height),v.clear(),h(),y()}function M(){f&&!(i.width===_.width&&i.height===_.height)&&(i.width=t.width=_.width,i.height=t.height=_.height),!i.width&&!i.height&&(r(t),i.width=t.width,i.height=t.height),m.clearRect(0,0,i.width,i.height),x=x.filter(function(T){return s(m,T)}),x.length?o=A.frame(M):w()}o=A.frame(M),u=w});return{addFettis:function(y){return x=x.concat(y),k},canvas:t,promise:k,reset:function(){o&&A.cancel(o),u&&u()}}}function z(t,a){var r=!t,i=!!c(a||{},"resize"),h=!1,x=c(a,"disableForReducedMotion",Boolean),m=E&&!!c(a||{},"useWorker"),o=m?S():null,u=r?ee:le,k=t&&o?!!t.__confetti_initialized:!1,y=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,w;function M(g,F,U){for(var q=c(g,"particleCount",K),Q=c(g,"angle",Number),X=c(g,"spread",Number),H=c(g,"startVelocity",Number),Be=c(g,"decay",Number),$e=c(g,"gravity",Number),Ue=c(g,"drift",Number),ve=c(g,"colors",Y),qe=c(g,"ticks",Number),ke=c(g,"shapes"),Ve=c(g,"scalar"),He=!!c(g,"flat"),we=re(g),je=q,me=[],We=t.width*we.x,Ge=t.height*we.y;je--;)me.push(V({x:We,y:Ge,angle:Q,spread:X,startVelocity:H,color:ve[je%ve.length],shape:ke[B(0,ke.length)],ticks:qe,decay:Be,gravity:$e,drift:Ue,scalar:Ve,flat:He}));return w?w.addFettis(me):(w=b(t,me,u,F,U),w.promise)}function T(g){var F=x||c(g,"disableForReducedMotion",Boolean),U=c(g,"zIndex",Number);if(F&&y)return L(function(H){H()});r&&w?t=w.canvas:r&&!t&&(t=ae(U),document.body.appendChild(t)),i&&!k&&u(t);var q={width:t.width,height:t.height};o&&!k&&o.init(t),k=!0,o&&(t.__confetti_initialized=!0);function Q(){if(o){var H={getBoundingClientRect:function(){if(!r)return t.getBoundingClientRect()}};u(H),o.postMessage({resize:{width:H.width,height:H.height}});return}q.width=q.height=null}function X(){w=null,i&&(h=!1,n.removeEventListener("resize",Q)),r&&t&&(document.body.contains(t)&&document.body.removeChild(t),t=null,k=!1)}return i&&!h&&(h=!0,n.addEventListener("resize",Q,!1)),o?o.fire(g,q,X):M(g,q,X)}return T.reset=function(){o&&o.reset(),w&&w.reset()},T}var $;function ce(){return $||($=z(null,{useWorker:!0,resize:!0})),$}function ze(t,a,r,i,h,x,m){var o=new Path2D(t),u=new Path2D;u.addPath(o,new DOMMatrix(a));var k=new Path2D;return k.addPath(u,new DOMMatrix([Math.cos(m)*h,Math.sin(m)*h,-Math.sin(m)*x,Math.cos(m)*x,r,i])),k}function Le(t){if(!N)throw new Error("path confetti are not supported in this browser");var a,r;typeof t=="string"?a=t:(a=t.path,r=t.matrix);var i=new Path2D(a),h=document.createElement("canvas"),x=h.getContext("2d");if(!r){for(var m=1e3,o=m,u=m,k=0,y=0,w,M,T=0;T<m;T+=2)for(var g=0;g<m;g+=2)x.isPointInPath(i,T,g,"nonzero")&&(o=Math.min(o,T),u=Math.min(u,g),k=Math.max(k,T),y=Math.max(y,g));w=k-o,M=y-u;var F=10,U=Math.min(F/w,F/M);r=[U,0,0,U,-Math.round(w/2+o)*U,-Math.round(M/2+u)*U]}return{type:"path",path:a,matrix:r}}function De(t){var a,r=1,i="#000000",h='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';typeof t=="string"?a=t:(a=t.text,r="scalar"in t?t.scalar:r,h="fontFamily"in t?t.fontFamily:h,i="color"in t?t.color:i);var x=10*r,m=""+x+"px "+h,o=new OffscreenCanvas(x,x),u=o.getContext("2d");u.font=m;var k=u.measureText(a),y=Math.ceil(k.actualBoundingBoxRight+k.actualBoundingBoxLeft),w=Math.ceil(k.actualBoundingBoxAscent+k.actualBoundingBoxDescent),M=2,T=k.actualBoundingBoxLeft+M,g=k.actualBoundingBoxAscent+M;y+=M+M,w+=M+M,o=new OffscreenCanvas(y,w),u=o.getContext("2d"),u.font=m,u.fillStyle=i,u.fillText(a,T,g);var F=1/r;return{type:"bitmap",bitmap:o.transferToImageBitmap(),matrix:[F,0,0,F,-y*F/2,-w*F/2]}}l.exports=function(){return ce().apply(this,arguments)},l.exports.reset=function(){ce().reset()},l.exports.create=z,l.exports.shapeFromPath=Le,l.exports.shapeFromText=De})((function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}})(),fe,!1);const ue=fe.exports;fe.exports.create;const Ta=({eventId:d})=>{const n=xe(),[l,f]=C.useState("idle"),[_,E]=C.useState(""),[N,R]=C.useState(null);C.useEffect(()=>{if(!(!n||!d))return n.on("giveaway_started",({prize:v})=>{f("rolling"),E(v),R(null)}),n.on("giveaway_winner",({winner:v,prize:A})=>{f("winner"),R(v),E(A),P()}),n.on("giveaway_error",({message:v})=>{f("idle")}),()=>{n.off("giveaway_started"),n.off("giveaway_winner"),n.off("giveaway_error")}},[n,d]);const P=()=>{if(typeof ue=="function"){const A=Date.now()+5e3,S={startVelocity:30,spread:360,ticks:60,zIndex:0},I=(D,c)=>Math.random()*(c-D)+D,O=setInterval(function(){const D=A-Date.now();if(D<=0)return clearInterval(O);const c=50*(D/5e3);ue(Object.assign({},S,{particleCount:c,origin:{x:I(.1,.3),y:Math.random()-.2}})),ue(Object.assign({},S,{particleCount:c,origin:{x:I(.7,.9),y:Math.random()-.2}}))},250)}},L=()=>{f("idle"),R(null)};return l==="idle"?null:e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm animate-in fade-in duration-300",children:e.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl shadow-2xl max-w-md w-full overflow-hidden border border-slate-200 dark:border-slate-700 relative",children:[l==="winner"&&e.jsx("button",{onClick:L,className:"absolute top-4 right-4 text-slate-400 hover:text-slate-600 dark:hover:text-slate-200 transition-colors",children:e.jsx(Ke,{className:"w-6 h-6"})}),e.jsxs("div",{className:"p-8 text-center space-y-6",children:[e.jsx("div",{className:"mx-auto w-24 h-24 rounded-full bg-amber-100 dark:bg-amber-900/30 flex items-center justify-center",children:l==="rolling"?e.jsx(ha,{className:"w-12 h-12 text-amber-500 animate-bounce"}):e.jsx(be,{className:"w-12 h-12 text-amber-500"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h2",{className:"text-2xl font-black text-slate-900 dark:text-white uppercase tracking-wide",children:l==="rolling"?"Sorteando...":"Temos um Vencedor!"}),e.jsxs("p",{className:"text-lg text-slate-600 dark:text-slate-300",children:["Pr√™mio: ",e.jsx("span",{className:"font-bold text-[#137fec]",children:_})]})]}),l==="winner"&&N&&e.jsxs("div",{className:"bg-emerald-50 dark:bg-emerald-900/20 p-6 rounded-xl border border-emerald-100 dark:border-emerald-800 animate-in zoom-in duration-500",children:[e.jsx("p",{className:"text-sm font-bold text-emerald-600 dark:text-emerald-400 uppercase mb-2",children:"Parab√©ns"}),e.jsx("p",{className:"text-3xl font-black text-slate-900 dark:text-white",children:N.name})]}),l==="rolling"&&e.jsxs("div",{className:"flex justify-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 bg-slate-400 rounded-full animate-bounce delay-0"}),e.jsx("div",{className:"w-3 h-3 bg-slate-400 rounded-full animate-bounce delay-150"}),e.jsx("div",{className:"w-3 h-3 bg-slate-400 rounded-full animate-bounce delay-300"})]})]})]})})},Qa=()=>{const{id:d}=Ye(),{user:n}=Se(),l=xe(),{theme:f,toggleTheme:_}=Xe(),[E,N]=ye.useState(!1),{data:R}=pe({queryKey:["event",d],queryFn:async()=>(await ge.getById(d)).data,enabled:!!d}),{data:P}=pe({queryKey:["enrollment",d,n==null?void 0:n.id],queryFn:async()=>(await ea.getByEventStatus(d)).data,enabled:!!d&&!!(n!=null&&n.id)}),L=(P==null?void 0:P.enrolled)&&(P==null?void 0:P.status)==="APPROVED",v=(n==null?void 0:n.role)==="ADMIN"||(n==null?void 0:n.role)==="SPEAKER"||(n==null?void 0:n.role)==="ORGANIZER";ye.useEffect(()=>{if(!l||!d)return;const I=()=>{console.log(`[DEBUG] Painel conectado (${l.id}). Tentando entrar na sala: ${d}`),l.emit("join_event_room",{eventId:d,user:n}),N(!0)},O=()=>{console.log("[DEBUG] Painel desconectado!"),N(!1)};return l.on("connect",I),l.on("disconnect",O),l.connected&&I(),()=>{l.off("connect",I),l.off("disconnect",O)}},[l,d,n]);const A=()=>{window.open(`/events/${d}/presentation`,"_blank")},S=()=>{l.emit("highlight_question",{questionId:null,eventId:d}),l.emit("highlight_media",{media:null,eventId:d})};return e.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-[#0a0f14] font-sans text-slate-900 dark:text-slate-100 flex flex-col h-screen overflow-hidden transition-colors duration-300",children:[e.jsx(Ta,{eventId:d}),e.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[e.jsxs("aside",{className:"hidden md:flex w-20 lg:w-64 bg-white dark:bg-[#0f1720] border-r border-slate-200 dark:border-slate-800 flex-col items-center py-6 gap-6 transition-colors",children:[e.jsx("div",{className:"lg:px-6 w-full mb-4",children:e.jsxs(he,{to:"/",className:"flex items-center gap-3 justify-center lg:justify-start",children:[e.jsx("div",{className:"bg-blue-600 p-2 rounded-lg text-white",children:e.jsx(se,{className:"w-5 h-5"})}),e.jsxs("span",{className:"hidden lg:block font-bold text-white tracking-tight text-xl",children:["PRO ",e.jsx("span",{className:"text-blue-500",children:"PRESENTE"})]})]})}),e.jsxs("nav",{className:"flex-1 w-full px-3 space-y-2",children:[e.jsx("div",{className:"px-3 mb-2 hidden lg:block",children:e.jsx("span",{className:"text-[10px] font-black uppercase text-slate-500 tracking-widest",children:"Painel de Sala"})}),e.jsx(he,{to:"/events",className:"block",children:e.jsxs(j,{variant:"ghost",className:"w-full justify-center lg:justify-start gap-4 text-slate-500 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white hover:bg-slate-100 dark:hover:bg-white/5",children:[e.jsx(Je,{className:"w-5 h-5"}),e.jsx("span",{className:"hidden lg:block",children:"Eventos"})]})}),e.jsxs(j,{variant:"ghost",className:"w-full justify-center lg:justify-start gap-4 text-slate-500 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white hover:bg-slate-100 dark:hover:bg-white/5",onClick:_,children:[f==="dark"?e.jsx(ia,{className:"w-5 h-5"}):e.jsx(da,{className:"w-5 h-5"}),e.jsx("span",{className:"hidden lg:block",children:f==="dark"?"Modo Claro":"Modo Escuro"})]})]}),e.jsx("div",{className:"px-3 w-full mt-auto",children:e.jsx(he,{to:"/dashboard",className:"w-full font-medium",children:e.jsxs(j,{variant:"outline",className:"w-full justify-center lg:justify-start gap-3 border-red-200 dark:border-red-900/30 text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-950/20",children:[e.jsx(Ce,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden lg:block",children:"Sair da Sala"})]})})})]}),e.jsxs("main",{className:"flex-1 flex flex-col min-w-0 bg-slate-50 dark:bg-[#0a0f14]",children:[e.jsxs("header",{className:"h-20 bg-white/80 dark:bg-[#0f1720]/80 backdrop-blur-md border-b border-slate-200 dark:border-slate-800 px-4 md:px-8 flex items-center justify-between sticky top-0 z-30",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(he,{to:"/dashboard",className:"md:hidden",children:e.jsx(j,{variant:"ghost",size:"icon",className:"text-slate-500",children:e.jsx(Ce,{className:"w-6 h-6"})})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("h1",{className:"font-bold text-lg md:text-xl text-slate-900 dark:text-white truncate max-w-[180px] md:max-w-md",children:(R==null?void 0:R.title)||"Intera√ß√£o em Tempo Real"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500 animate-pulse"}),e.jsxs("span",{className:"text-[11px] text-slate-500 font-medium uppercase tracking-wider",children:["Sala Ativa ‚Ä¢ ",n==null?void 0:n.name]})]})]})]}),e.jsx("div",{className:"flex items-center gap-3",children:v&&e.jsxs(e.Fragment,{children:[e.jsxs(j,{variant:"outline",className:"hidden sm:flex items-center gap-2 bg-white dark:bg-slate-900 border-slate-200 dark:border-slate-750 hover:bg-slate-50 dark:hover:bg-slate-800 text-slate-600 dark:text-slate-300",onClick:A,children:[e.jsx(se,{className:"w-4 h-4"}),"Abrir Tel√£o"]}),e.jsxs(j,{variant:"destructive",className:"flex items-center gap-2 shadow-lg shadow-red-900/20",onClick:S,children:[e.jsx(Oe,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Limpar Tel√£o"})]})]})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-0",children:e.jsx("div",{className:"max-w-5xl mx-auto py-8 px-4 md:px-8",children:e.jsx(Sa,{eventId:d,isEnrollmentApproved:L})})})]})]}),e.jsx("div",{className:"fixed bottom-4 right-4 bg-white/80 dark:bg-black/80 backdrop-blur border border-slate-200 dark:border-white/10 p-2 rounded text-[10px] font-mono text-slate-500 dark:text-white/40 flex flex-col gap-1 z-[100] shadow-xl",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${E?"bg-green-500":"bg-red-500"}`}),e.jsxs("span",{children:["Painel: ",E?"Conectado":"Desconectado"]})]})})]})};export{Qa as default};
