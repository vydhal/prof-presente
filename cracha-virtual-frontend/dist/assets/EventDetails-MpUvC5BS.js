import{n as q,a as R,u as $,b as z,o as T,r as Q,p as y,q as V,j as e,c as C,s as E,L as d,m as b,B as i,t as H,C as K,v as h,i as D,h as Y}from"./index-BklJB83-.js";import{S as A}from"./share-2-CuotzjmS.js";import{U as Z}from"./users-DkAybG50.js";import{M as G}from"./map-pin-DL_mMyFw.js";import{C as W}from"./circle-check-big-BrtE6MP1.js";import{A as _}from"./arrow-right-C0ByVhZk.js";import{M as J}from"./mail-DAllZl6A.js";const oe=()=>{const{id:o}=q(),{user:a}=R(),{platformName:x,logoUrl:m}=$(),L=z(),f=T(),[c,p]=Q.useState("about"),{data:s,isLoading:I,isError:M}=y({queryKey:["event",o],queryFn:async()=>(await Y.getById(o)).data,retry:1}),{data:F,isLoading:O}=y({queryKey:["enrollment-status",o,a==null?void 0:a.id],queryFn:async()=>{var r;const t=await D.getUserEnrollments(a.id);return(((r=t.data)==null?void 0:r.enrollments)||t.data||[]).find(l=>l.eventId===o)},enabled:!!a&&!!o}),u=!!F;a&&s&&(a.id===s.creatorId||a.role==="ADMIN"||a.role);const g=V({mutationFn:()=>D.enroll(o),onSuccess:()=>{h.success("Inscrição realizada com sucesso!"),f.invalidateQueries(["event",o]),f.invalidateQueries(["enrollment-status",o,a==null?void 0:a.id])},onError:t=>{var r,l;const n=((l=(r=t.response)==null?void 0:r.data)==null?void 0:l.message)||"Erro ao realizar inscrição.";h.error(n)}}),U=()=>{if(!a){L(`/login?redirect=/events/${o}`);return}g.mutate()},P=async()=>{const t=window.location.href,n=(s==null?void 0:s.title)||"Evento EduAgenda",r=`Confira este evento: ${n}`;if(navigator.share)try{await navigator.share({title:n,text:r,url:t})}catch(l){console.log("Erro ao compartilhar",l)}else try{await navigator.clipboard.writeText(t),h.success("Link copiado para a área de transferência!")}catch{h.error("Não foi possível copiar o link.")}};if(I)return e.jsx("div",{className:"min-h-screen bg-[#f6f7f8] dark:bg-[#101922] flex items-center justify-center",children:e.jsx(C,{className:"w-8 h-8 animate-spin text-[#137fec]"})});if(M||!s)return e.jsxs("div",{className:"min-h-screen bg-[#f6f7f8] dark:bg-[#101922] flex flex-col items-center justify-center text-slate-500",children:[e.jsx(E,{className:"w-12 h-12 mb-4 text-red-500"}),e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white mb-2",children:"Evento não encontrado"}),e.jsx(d,{to:"/",className:"text-[#137fec] hover:underline",children:"Voltar para o início"})]});const S=(t,n)=>{const r=new Date(t),l=new Date(n),v={day:"numeric",month:"long",year:"numeric"},k=r.toLocaleDateString("pt-BR",v);return r.getDate()===l.getDate()&&r.getMonth()===l.getMonth()&&r.getFullYear()===l.getFullYear()?k:`${k} - ${l.toLocaleDateString("pt-BR",v)}`},j=t=>new Date(t).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"}),w=s.maxAttendees&&s.enrolledCount>=s.maxAttendees,B=new Date(s.endDate)<new Date,N=s.imageUrl?b(s.imageUrl):"https://images.unsplash.com/photo-1544531586-fde5298cdd40?q=80&w=2070&auto=format&fit=crop";return e.jsxs("div",{className:"min-h-screen bg-[#f6f7f8] dark:bg-[#101922] text-[#0d141b] dark:text-slate-100 font-sans",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-white/80 dark:bg-[#101922]/80 backdrop-blur-md border-b border-slate-200 dark:border-slate-800",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex justify-between items-center h-16",children:[e.jsxs(d,{to:"/",className:"flex items-center gap-3",children:[m?e.jsx("img",{src:m,alt:x,className:"h-8 w-auto object-contain"}):e.jsx("div",{className:"text-[#137fec]",children:e.jsx("svg",{className:"w-8 h-8",fill:"none",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M36.7273 44C33.9891 44 31.6043 39.8386 30.3636 33.69C29.123 39.8386 26.7382 44 24 44C21.2618 44 18.877 39.8386 17.6364 33.69C16.3957 39.8386 14.0109 44 11.2727 44C7.25611 44 4 35.0457 4 24C4 12.9543 7.25611 4 11.2727 4C14.0109 4 16.3957 8.16144 17.6364 14.31C18.877 8.16144 21.2618 4 24 4C26.7382 4 29.123 8.16144 30.3636 14.31C31.6043 8.16144 33.9891 4 36.7273 4C40.7439 4 44 12.9543 44 24C44 35.0457 40.7439 44 36.7273 44Z",fill:"currentColor"})})}),e.jsx("span",{className:"text-xl font-bold tracking-tight text-slate-900 dark:text-white",children:x})]}),e.jsx("div",{className:"flex items-center gap-4",children:a?e.jsx(d,{to:"/dashboard",children:e.jsxs(i,{variant:"outline",className:"gap-2 border-slate-200 dark:border-slate-700",children:[e.jsx(H,{className:"w-4 h-4"}),"Ir para Dashboard"]})}):e.jsx(d,{to:"/login",children:e.jsx(i,{className:"bg-[#137fec] hover:bg-blue-600 text-white font-bold shadow-lg shadow-blue-500/20",children:"Entrar / Cadastrar-se"})})})]})})}),e.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("nav",{className:"flex items-center gap-2 text-sm text-slate-500 dark:text-slate-400 mb-6",children:[e.jsx(d,{to:"/",className:"hover:text-[#137fec]",children:"Início"}),e.jsx("span",{className:"text-xs",children:"/"}),a&&e.jsxs(e.Fragment,{children:[e.jsx(d,{to:"/events",className:"hover:text-[#137fec]",children:"Eventos"}),e.jsx("span",{className:"text-xs",children:"/"})]}),e.jsx("span",{className:"text-slate-900 dark:text-slate-100 font-medium truncate max-w-[200px] md:max-w-none",children:s.title})]}),e.jsxs("div",{className:"relative w-full aspect-[21/9] rounded-xl overflow-hidden mb-8 shadow-xl group",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-black/20 to-transparent z-10"}),e.jsx("img",{src:N,alt:s.title,onError:t=>console.error("Erro ao carregar imagem de capa:",N,t),className:"w-full h-full object-cover transition-transform duration-700 group-hover:scale-105"}),e.jsxs("div",{className:"absolute bottom-0 left-0 p-6 md:p-10 z-20",children:[e.jsx("span",{className:"bg-[#137fec] text-white px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wider mb-4 inline-block",children:"Evento"}),e.jsx("h1",{className:"text-3xl md:text-5xl font-black text-white leading-tight max-w-4xl drop-shadow-lg mb-4",children:s.title}),e.jsx("div",{className:"flex gap-3",children:e.jsxs(i,{onClick:P,variant:"outline",className:"bg-black/30 hover:bg-black/50 text-white border-white/20 backdrop-blur-sm gap-2 whitespace-nowrap",children:[e.jsx(A,{className:"w-4 h-4"}),"Compartilhar"]})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 items-start",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-12",children:[e.jsxs("div",{className:"flex border-b border-slate-200 dark:border-slate-800 overflow-x-auto scrollbar-hide",children:[e.jsx("button",{onClick:()=>p("about"),className:`pb-4 px-2 text-sm font-bold uppercase tracking-wider border-b-2 transition-colors ${c==="about"?"border-[#137fec] text-[#137fec]":"border-transparent text-slate-400 hover:text-slate-600"}`,children:"Sobre"}),e.jsx("button",{onClick:()=>p("schedule"),className:`pb-4 px-2 text-sm font-bold uppercase tracking-wider border-b-2 transition-colors ${c==="schedule"?"border-[#137fec] text-[#137fec]":"border-transparent text-slate-400 hover:text-slate-600"}`,children:"Programação"}),e.jsx("button",{onClick:()=>p("speakers"),className:`pb-4 px-2 text-sm font-bold uppercase tracking-wider border-b-2 transition-colors ${c==="speakers"?"border-[#137fec] text-[#137fec]":"border-transparent text-slate-400 hover:text-slate-600"}`,children:"Palestrantes"})]}),e.jsxs("section",{className:"space-y-6 min-h-[300px]",children:[c==="about"&&e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"Detalhes"}),e.jsx("div",{className:"prose prose-slate dark:prose-invert max-w-none text-slate-600 dark:text-slate-400 leading-relaxed whitespace-pre-wrap",children:s.description})]}),c==="schedule"&&e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"Programação"}),e.jsx("div",{className:"space-y-4",children:s.schedule?s.schedule.split(`
`).filter(t=>t.trim()).map((t,n)=>e.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-xl border-l-4 border-[#137fec] shadow-sm flex gap-4",children:[e.jsx("div",{className:"font-bold text-[#137fec] whitespace-nowrap",children:t.match(/^\d{2}:\d{2}/)?t.substring(0,5):"•"}),e.jsx("div",{className:"text-slate-700 dark:text-slate-300",children:t.match(/^\d{2}:\d{2}/)?t.substring(5).replace(/^-/,"").trim():t})]},n)):e.jsx("p",{className:"text-slate-500 italic",children:"A programação detalhada será divulgada em breve."})})]}),c==="speakers"&&e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white mb-6",children:"Palestrantes Confirmados"}),s.speakerName?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl p-6 flex flex-col md:flex-row items-center gap-6 shadow-sm border border-slate-100 dark:border-slate-700",children:[e.jsx("div",{className:"w-32 h-32 rounded-full bg-slate-200 overflow-hidden shrink-0 border-4 border-white dark:border-slate-700 shadow-md",children:s.speakerPhotoUrl?e.jsx("img",{src:b(s.speakerPhotoUrl),alt:s.speakerName,className:"w-full h-full object-cover",onError:t=>{console.error("Erro Loading Speaker:",b(s.speakerPhotoUrl)),t.target.src="",t.target.parentElement.innerHTML='<div class="w-full h-full flex items-center justify-center text-slate-400 bg-slate-100"><svg class="w-12 h-12" ...><path d="..." /></svg></div>'}}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-slate-400 bg-slate-100",children:e.jsx(Z,{className:"w-12 h-12"})})}),e.jsxs("div",{className:"text-center md:text-left",children:[e.jsx("h4",{className:"text-xl font-bold text-slate-900 dark:text-white mb-1",children:s.speakerName}),e.jsx("p",{className:"text-[#137fec] font-medium text-lg",children:s.speakerRole})]})]})}):e.jsx("p",{className:"text-slate-500 italic",children:"Nenhum palestrante cadastrado ainda."})]})]})]}),e.jsxs("aside",{className:"space-y-6 lg:sticky lg:top-24",children:[e.jsx("div",{className:"bg-white dark:bg-[#1e293b] rounded-xl shadow-xl shadow-slate-200/50 dark:shadow-none border border-slate-100 dark:border-slate-800 overflow-hidden",children:e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-[#137fec]/10 text-[#137fec] flex items-center justify-center shrink-0",children:e.jsx(K,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[11px] font-bold text-slate-400 uppercase tracking-wider",children:"Data e Horário"}),e.jsx("p",{className:"text-sm font-semibold text-slate-900 dark:text-white capitalize",children:S(s.startDate,s.endDate)}),e.jsxs("p",{className:"text-xs text-slate-500",children:[j(s.startDate)," às ",j(s.endDate)]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-[#137fec]/10 text-[#137fec] flex items-center justify-center shrink-0",children:e.jsx(G,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[11px] font-bold text-slate-400 uppercase tracking-wider",children:"Local"}),e.jsx("p",{className:"text-sm font-semibold text-slate-900 dark:text-white",children:s.location})]})]})]}),e.jsxs("div",{className:"relative w-full h-48 bg-slate-100 dark:bg-slate-800 rounded-lg overflow-hidden group border border-slate-200 dark:border-slate-700",children:[e.jsx("iframe",{width:"100%",height:"100%",frameBorder:"0",scrolling:"no",marginHeight:"0",marginWidth:"0",src:`https://maps.google.com/maps?q=${encodeURIComponent(s.location)}&t=&z=15&ie=UTF8&iwloc=&output=embed`,className:"w-full h-full grayscale opacity-80 hover:grayscale-0 hover:opacity-100 transition-all duration-500"}),e.jsxs("a",{href:s.mapLink||`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(s.location)}`,target:"_blank",rel:"noopener noreferrer",className:"absolute bottom-2 right-2 bg-white dark:bg-slate-900 px-2 py-1 rounded text-[10px] font-bold shadow-sm hover:bg-slate-50 flex items-center gap-1",children:["Abrir no Maps ",e.jsx(A,{className:"w-3 h-3"})]})]}),e.jsxs("div",{className:"pt-4 border-t border-slate-100 dark:border-slate-800",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("span",{className:"text-slate-500 text-sm",children:"Vagas"}),e.jsx("div",{className:"text-right",children:s.maxAttendees?e.jsx(e.Fragment,{children:e.jsxs("span",{className:`text-xl font-black uppercase ${w?"text-red-500":"text-emerald-500"}`,children:[s.enrolledCount," / ",s.maxAttendees]})}):e.jsx("span",{className:"text-xl font-black text-emerald-500 uppercase",children:"Ilimitadas"})})]}),B?e.jsx(i,{disabled:!0,className:"w-full bg-slate-300 text-slate-500 font-bold py-6 rounded-xl cursor-not-allowed",children:"Evento Encerrado"}):w&&!u?e.jsx(i,{disabled:!0,className:"w-full bg-red-100 text-red-500 font-bold py-6 rounded-xl cursor-not-allowed",children:"Vagas Esgotadas"}):u?e.jsxs(i,{className:"w-full bg-emerald-500 hover:bg-emerald-600 text-white font-bold py-6 rounded-xl transition-all shadow-lg shadow-emerald-500/30 flex items-center justify-center gap-2 cursor-default",children:[e.jsx(W,{className:"w-5 h-5"}),"Inscrição Confirmada"]}):e.jsx(i,{onClick:U,disabled:g.isLoading,className:"w-full bg-[#137fec] hover:bg-blue-600 text-white font-bold py-6 rounded-xl transition-all shadow-lg shadow-blue-500/30 flex items-center justify-center gap-2",children:g.isLoading?e.jsx(C,{className:"w-5 h-5 animate-spin"}):e.jsxs(e.Fragment,{children:[a?"Confirmar Inscrição":"Garantir Minha Vaga",e.jsx(_,{className:"w-5 h-5"})]})}),!a&&e.jsx("p",{className:"text-center text-[11px] text-slate-400 mt-4 px-4 leading-snug",children:"* Login necessário para realizar a inscrição."}),a&&e.jsx("p",{className:"text-center text-[11px] text-slate-400 mt-4 px-4 leading-snug",children:"* Ao confirmar, você garante sua vaga e certificado."})]})]})}),e.jsxs("div",{className:"bg-slate-900 text-white rounded-xl p-6 relative overflow-hidden shadow-xl",children:[e.jsxs("div",{className:"relative z-10 space-y-3",children:[e.jsx("h4",{className:"font-bold",children:"Dúvidas sobre o evento?"}),e.jsx("p",{className:"text-xs text-slate-300",children:"Entre em contato com a equipe de coordenação."}),e.jsxs("a",{href:"mailto:suporte@educacao.cg.pb.gov.br",className:"text-xs font-bold flex items-center gap-2 hover:text-[#137fec] transition-colors",children:[e.jsx(J,{className:"w-4 h-4"}),"suporte@educacao.cg.pb.gov.br"]})]}),e.jsx("div",{className:"absolute -right-4 -bottom-4 text-white/5 pointer-events-none",children:e.jsx(E,{className:"w-24 h-24"})})]})]})]})]}),e.jsx("footer",{className:"bg-white dark:bg-[#101922] border-t border-slate-200 dark:border-slate-800 mt-20",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-6",children:[e.jsxs("div",{className:"flex items-center gap-3 opacity-50",children:[m?e.jsx("img",{src:m,alt:x,className:"h-6 w-auto object-contain grayscale"}):e.jsx("div",{className:"w-8 h-8 bg-slate-200 rounded-md flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-slate-500",fill:"none",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M36.7273 44C33.9891 44 31.6043 39.8386 30.3636 33.69C29.123 39.8386 26.7382 44 24 44C21.2618 44 18.877 39.8386 17.6364 33.69C16.3957 39.8386 14.0109 44 11.2727 44C7.25611 44 4 35.0457 4 24C4 12.9543 7.25611 4 11.2727 4C14.0109 4 16.3957 8.16144 17.6364 14.31C18.877 8.16144 21.2618 4 24 4C26.7382 4 29.123 8.16144 30.3636 14.31C31.6043 8.16144 33.9891 4 36.7273 4C40.7439 4 44 12.9543 44 24C44 35.0457 40.7439 44 36.7273 44Z",fill:"currentColor"})})}),e.jsx("p",{className:"text-sm font-bold text-slate-500",children:x})]}),e.jsxs("p",{className:"text-xs text-slate-400",children:["© 2026 ",x,". Todos os direitos reservados."]})]})})})]})};export{oe as default};
