import{u as te,r as n,a as ie,b as ce,j as e,d as de,U as me,B as j,X as v,c as he,L as pe,e as ue}from"./index-BklJB83-.js";import{I as i}from"./input-D985NYo-.js";import{L as xe}from"./label-tnVTU4ew.js";import{C as ge,d as fe}from"./card-DDG5aQ8T.js";import{A as je,a as ve}from"./alert-Bqlpc-Um.js";import{S as be,a as Ne,b as Se,c as we,d as b}from"./calendar-Beg-2EUn.js";import{P as N,a as S,C as w,b as C,c as y,d as E,e as P,f as k,g as Ce,h as ye}from"./command-CLUyWUob.js";import{B as T}from"./badge-nwE1jcP_.js";import{D as Ee,t as Pe,f as ke,B as Te}from"./date-picker-CYUvtsmC.js";import{S as D}from"./separator-B7gRSS1v.js";import{E as $}from"./eye-off-CrFarNK1.js";import{E as B}from"./eye-1zQgUw0t.js";import"./index-BC-5kjkL.js";import"./check-Dn2gDEB4.js";import"./chevron-right-Dgm8A5rN.js";import"./search-BUhK1DE4.js";const De=[{value:"MANHA",label:"Manhã"},{value:"TARDE",label:"Tarde"},{value:"NOITE",label:"Noite"},{value:"INTEGRAL",label:"Integral"}],Ae=[{value:"SUPERIOR",label:"Superior"},{value:"ADMINISTRATIVO",label:"Administrativo"},{value:"INFANTIL",label:"Ed. Infantil"},{value:"FUNDAMENTAL1",label:"Fundamental I"},{value:"FUNDAMENTAL2",label:"Fundamental II"},{value:"EJA",label:"EJA"}],He=()=>{const{platformName:p,logoUrl:M}=te(),[r,c]=n.useState({name:"",email:"",password:"",confirmPassword:"",cpf:"",birthDate:"",phone:"",address:"",neighborhood:"",professionName:"",workplaceIds:[],workShifts:[],contractType:"",teachingSegments:[]}),[u,V]=n.useState(!1),[x,q]=n.useState(!1),[A,g]=n.useState(!1),[I,f]=n.useState(""),[z,J]=n.useState([]),[d,L]=n.useState([]),[G,O]=n.useState(!1),[m,R]=n.useState([]),[Z,H]=n.useState(!1),[h,F]=n.useState([]),[X,K]=n.useState(!1),{register:Q}=ie(),Y=ce();n.useEffect(()=>{(async()=>{try{const a=await ue.get("/workplaces?limit=500");J(a.data.workplaces||[])}catch(a){console.error("Erro ao carregar localidades:",a)}})()},[]);const t=s=>{let a=s.target.value;s.target.name==="cpf"&&(a=a.replace(/\D/g,"").replace(/(\d{3})(\d)/,"$1.$2").replace(/(\d{3})(\d)/,"$1.$2").replace(/(\d{3})(\d{1,2})$/,"$1-$2")),s.target.name==="phone"&&(a=a.replace(/\D/g,"").replace(/(\d{2})(\d)/,"($1) $2").replace(/(\d{5})(\d)/,"$1-$2")),c({...r,[s.target.name]:a})},U=(s,a)=>{c({...r,[s]:a})},_=s=>{if(!d.some(a=>a.id===s.id)){const a=[...d,s];L(a),c({...r,workplaceIds:a.map(l=>l.id)})}O(!1)},ee=s=>{const a=d.filter(l=>l.id!==s.id);L(a),c({...r,workplaceIds:a.map(l=>l.id)})},se=s=>{if(!m.some(a=>a.value===s.value)){const a=[...m,s];R(a),c({...r,workShifts:a.map(l=>l.value)})}},ae=s=>{const a=m.filter(l=>l.value!==s.value);R(a),c({...r,workShifts:a.map(l=>l.value)})},re=s=>{if(!h.some(a=>a.value===s.value)){const a=[...h,s];F(a),c({...r,teachingSegments:a.map(l=>l.value)})}},le=s=>{const a=h.filter(l=>l.value!==s.value);F(a),c({...r,teachingSegments:a.map(l=>l.value)})},oe=()=>r.name.trim()?r.email.trim()?r.password.length<6?"A senha deve ter pelo menos 6 caracteres":r.password!==r.confirmPassword?"As senhas não coincidem":!r.cpf||r.cpf.replace(/\D/g,"").length!==11?"CPF inválido (11 dígitos obrigatórios)":r.birthDate?r.phone?r.address?r.neighborhood?r.professionName?r.contractType?r.workShifts.length===0?"Selecione pelo menos um turno de trabalho":r.teachingSegments.length===0?"Selecione pelo menos um segmento de ensino":r.workplaceIds.length===0?"Selecione pelo menos uma unidade educacional":null:"Tipo de vínculo é obrigatório":"Profissão é obrigatória":"Bairro é obrigatório":"Endereço é obrigatório":"Telefone é obrigatório":"Data de Nascimento é obrigatória":"Email é obrigatório":"Nome completo é obrigatório",ne=async s=>{s.preventDefault(),g(!0),f("");const a=oe();if(a){f(a),g(!1),window.scrollTo({top:0,behavior:"smooth"});return}const l={...r};delete l.confirmPassword;const W=await Q(l);W.success?Y("/dashboard"):(f(W.error),window.scrollTo({top:0,behavior:"smooth"})),g(!1)},o=({label:s,children:a,required:l=!0})=>e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs(xe,{className:"text-sm font-medium text-gray-700",children:[s," ",l&&e.jsx("span",{className:"text-red-500",children:"*"})]}),a]});return e.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md text-center mb-6",children:[e.jsx("img",{src:M||de,alt:p,className:"mx-auto h-16 w-auto mb-4"}),e.jsx("h2",{className:"text-3xl font-extrabold text-gray-900",children:p}),e.jsxs("p",{className:"mt-2 text-sm text-gray-600",children:["Crie sua conta no ",p," para acessar o sistema."]})]}),e.jsx("div",{className:"sm:mx-auto sm:w-full sm:max-w-3xl",children:e.jsx(ge,{className:"bg-white shadow-xl rounded-lg border-0",children:e.jsxs(fe,{className:"p-8",children:[e.jsxs("form",{onSubmit:ne,className:"space-y-8",children:[I&&e.jsx(je,{variant:"destructive",children:e.jsx(ve,{children:I})}),e.jsxs("section",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4 text-primary",children:[e.jsx(me,{className:"h-5 w-5"}),e.jsx("h3",{className:"text-lg font-semibold",children:"Dados Pessoais"})]}),e.jsx(D,{className:"mb-6"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(o,{label:"Nome Completo",children:e.jsx(i,{id:"name",name:"name",placeholder:"Seu nome completo",value:r.name,onChange:t})}),e.jsx(o,{label:"Data de Nascimento",children:e.jsx(Ee,{value:r.birthDate?Pe(r.birthDate,"UTC"):null,onSelect:s=>U("birthDate",s?ke(s,"UTC"):"")})}),e.jsx(o,{label:"CPF",children:e.jsx(i,{name:"cpf",placeholder:"000.000.000-00",value:r.cpf,onChange:t,maxLength:14})}),e.jsx(o,{label:"Telefone / WhatsApp",children:e.jsx(i,{name:"phone",placeholder:"(00) 00000-0000",value:r.phone,onChange:t,maxLength:15})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-6",children:[e.jsx(o,{label:"Endereço (Rua e Nº)",children:e.jsx(i,{name:"address",placeholder:"Rua Exemplo, 123",value:r.address,onChange:t})}),e.jsx(o,{label:"Bairro",children:e.jsx(i,{name:"neighborhood",placeholder:"Seu bairro",value:r.neighborhood,onChange:t})})]})]}),e.jsxs("section",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4 mt-8 text-primary",children:[e.jsx("div",{className:"h-5 w-5 flex items-center justify-center font-bold",children:"@"}),e.jsx("h3",{className:"text-lg font-semibold",children:"Dados de Acesso"})]}),e.jsx(D,{className:"mb-6"}),e.jsxs("div",{className:"space-y-6",children:[e.jsx(o,{label:"Email",children:e.jsx(i,{name:"email",type:"email",placeholder:"seu@email.com",value:r.email,onChange:t})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(o,{label:"Senha",children:e.jsxs("div",{className:"relative",children:[e.jsx(i,{type:u?"text":"password",name:"password",placeholder:"Mínimo 6 caracteres",value:r.password,onChange:t}),e.jsx(j,{type:"button",variant:"ghost",size:"icon",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>V(!u),children:u?e.jsx($,{className:"h-4 w-4"}):e.jsx(B,{className:"h-4 w-4"})})]})}),e.jsx(o,{label:"Confirmar Senha",children:e.jsxs("div",{className:"relative",children:[e.jsx(i,{type:x?"text":"password",name:"confirmPassword",placeholder:"Confirme sua senha",value:r.confirmPassword,onChange:t}),e.jsx(j,{type:"button",variant:"ghost",size:"icon",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>q(!x),children:x?e.jsx($,{className:"h-4 w-4"}):e.jsx(B,{className:"h-4 w-4"})})]})})]})]})]}),e.jsxs("section",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4 mt-8 text-primary",children:[e.jsx(Te,{className:"h-5 w-5"}),e.jsx("h3",{className:"text-lg font-semibold",children:"Dados Profissionais"})]}),e.jsx(D,{className:"mb-6"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(o,{label:"Profissão / Cargo",children:e.jsx(i,{name:"professionName",placeholder:"Ex: Professor, Coordenador",value:r.professionName,onChange:t})}),e.jsx(o,{label:"Vínculo Empregatício",children:e.jsxs(be,{value:r.contractType,onValueChange:s=>U("contractType",s),children:[e.jsx(Ne,{children:e.jsx(Se,{placeholder:"Selecione"})}),e.jsxs(we,{children:[e.jsx(b,{value:"EFETIVO",children:"Efetivo"}),e.jsx(b,{value:"PRESTADOR",children:"Prestador"}),e.jsx(b,{value:"ESTUDANTE",children:"Estudante"})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-6",children:[e.jsx(o,{label:"Turno(s) de Trabalho",required:!0,children:e.jsxs(N,{open:Z,onOpenChange:H,children:[e.jsx(S,{asChild:!0,children:e.jsxs("div",{className:"flex min-h-[40px] w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 cursor-pointer",children:[e.jsx("div",{className:"flex flex-wrap gap-1",children:m.length>0?m.map(s=>e.jsxs(T,{variant:"secondary",className:"mr-1",children:[s.label,e.jsx("span",{onClick:a=>{a.stopPropagation(),ae(s)},className:"ml-1 cursor-pointer hover:text-red-500",children:e.jsx(v,{className:"h-3 w-3"})})]},s.value)):e.jsx("span",{className:"text-muted-foreground",children:"Selecione..."})}),e.jsx(w,{className:"h-4 w-4 opacity-50"})]})}),e.jsx(C,{className:"p-0",align:"start",children:e.jsx(y,{children:e.jsx(E,{children:e.jsx(P,{children:De.map(s=>e.jsx(k,{onSelect:()=>se(s),children:s.label},s.value))})})})})]})}),e.jsx(o,{label:"Segmento(s) de Atuação",required:!0,children:e.jsxs(N,{open:X,onOpenChange:K,children:[e.jsx(S,{asChild:!0,children:e.jsxs("div",{className:"flex min-h-[40px] w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 cursor-pointer",children:[e.jsx("div",{className:"flex flex-wrap gap-1",children:h.length>0?h.map(s=>e.jsxs(T,{variant:"secondary",className:"mr-1",children:[s.label,e.jsx("span",{onClick:a=>{a.stopPropagation(),le(s)},className:"ml-1 cursor-pointer hover:text-red-500",children:e.jsx(v,{className:"h-3 w-3"})})]},s.value)):e.jsx("span",{className:"text-muted-foreground",children:"Selecione..."})}),e.jsx(w,{className:"h-4 w-4 opacity-50"})]})}),e.jsx(C,{className:"p-0",align:"start",children:e.jsx(y,{children:e.jsx(E,{children:e.jsx(P,{children:Ae.map(s=>e.jsx(k,{onSelect:()=>re(s),children:s.label},s.value))})})})})]})})]}),e.jsx("div",{className:"mt-6",children:e.jsx(o,{label:"Unidade(s) Educacional(is)",required:!0,children:e.jsxs(N,{open:G,onOpenChange:O,children:[e.jsx(S,{asChild:!0,children:e.jsxs("div",{className:"flex min-h-[40px] w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 cursor-pointer",children:[e.jsx("div",{className:"flex flex-wrap gap-1",children:d.length>0?d.map(s=>e.jsxs(T,{variant:"secondary",className:"mr-1",children:[s.name,e.jsx("span",{onClick:a=>{a.stopPropagation(),ee(s)},className:"ml-1 cursor-pointer hover:text-red-500",children:e.jsx(v,{className:"h-3 w-3"})})]},s.id)):e.jsx("span",{className:"text-muted-foreground",children:"Pesquisar unidade..."})}),e.jsx(w,{className:"h-4 w-4 opacity-50"})]})}),e.jsx(C,{className:"p-0",align:"start",children:e.jsxs(y,{children:[e.jsx(Ce,{placeholder:"Buscar unidade..."}),e.jsxs(E,{children:[e.jsx(ye,{children:"Nenhuma unidade encontrada."}),e.jsx(P,{children:z.filter(s=>!d.some(a=>a.id===s.id)).map(s=>e.jsxs(k,{onSelect:()=>_(s),children:[s.name," - ",s.city]},s.id))})]})]})})]})})})]}),e.jsx("div",{className:"pt-6",children:e.jsx(j,{type:"submit",className:"w-full text-lg h-12",disabled:A,children:A?e.jsx(he,{className:"mr-2 h-5 w-5 animate-spin"}):"Finalizar Cadastro e Entrar"})})]}),e.jsx("div",{className:"mt-8 text-center border-t pt-6",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["Já possui uma conta?"," ",e.jsx(pe,{to:"/login",className:"font-semibold text-primary hover:underline",children:"Fazer Login"})]})})]})})})]})};export{He as default};
