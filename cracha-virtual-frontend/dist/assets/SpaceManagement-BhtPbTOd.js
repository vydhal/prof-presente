import{f as F,r as x,j as e,M as vs,a3 as Ns,a2 as Be,a0 as ys,K as ts,O as Ze,at as ws,F as ks,a as Cs,u as Es,o as Ds,p as le,q as G,B as f,a8 as Ss,C as je,v as S,au as A,av as ne}from"./index-BklJB83-.js";import{C as z,a as ie,b as oe,d as W,c as ge}from"./card-DDG5aQ8T.js";import{I as M}from"./input-D985NYo-.js";import{B as V}from"./badge-nwE1jcP_.js";import{m as rs,g as ls,i as Ms,S as fe,a as ve,b as Ne,c as ye,d as Y,f as q,e as Ts,p as Re}from"./calendar-Beg-2EUn.js";import{D as Ae,g as qs,a as Ie,b as Oe,c as Le,d as We,e as Fe}from"./dialog-0oblSlXr.js";import{L as h}from"./label-tnVTU4ew.js";import{T as _e}from"./textarea-XiO_Vaua.js";import{u as Ps}from"./index-BC-5kjkL.js";import{C as Rs}from"./check-Dn2gDEB4.js";import{T as As,a as Is,b as ce,c as de}from"./tabs-CexLezTw.js";import{T as ze,a as Ve,b as J,c as w,d as He,e as y}from"./table-DQrPvxsy.js";import{P as we}from"./plus-bjoOcEk9.js";import{U as Os}from"./users-DkAybG50.js";import{L as Ls}from"./laptop-DH7dNO9_.js";import{M as Fs}from"./monitor-B2e3jbhW.js";import{C as X}from"./circle-check-BeCjAvp9.js";import{S as _s}from"./search-BUhK1DE4.js";import{M as Xe}from"./map-pin-DL_mMyFw.js";import{S as es}from"./square-pen-BST7N6r4.js";import"./chevron-right-Dgm8A5rN.js";/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zs=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],ee=F("circle-x",zs);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vs=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],Hs=F("funnel",Vs);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $s=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],Qs=F("history",$s);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Us=[["path",{d:"M5 22h14",key:"ehvnwv"}],["path",{d:"M5 2h14",key:"pdyrp9"}],["path",{d:"M17 22v-4.172a2 2 0 0 0-.586-1.414L12 12l-4.414 4.414A2 2 0 0 0 7 17.828V22",key:"1d314k"}],["path",{d:"M7 2v4.172a2 2 0 0 0 .586 1.414L12 12l4.414-4.414A2 2 0 0 0 17 6.172V2",key:"1vvvr6"}]],ss=F("hourglass",Us);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bs=[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]],Gs=F("mic",Bs);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ys=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]],Ce=F("panels-top-left",Ys);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Js=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Ks=F("settings",Js);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zs=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]],as=F("trash",Zs);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ws=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],Xs=F("volume-2",Ws);function L(a,t){const n=ta(a);let i;if(n.date){const m=ra(n.date,2);i=la(m.restDateString,m.year)}if(!i||isNaN(i.getTime()))return new Date(NaN);const c=i.getTime();let b=0,d;if(n.time&&(b=na(n.time),isNaN(b)))return new Date(NaN);if(n.timezone){if(d=ia(n.timezone),isNaN(d))return new Date(NaN)}else{const m=new Date(c+b),N=new Date(0);return N.setFullYear(m.getUTCFullYear(),m.getUTCMonth(),m.getUTCDate()),N.setHours(m.getUTCHours(),m.getUTCMinutes(),m.getUTCSeconds(),m.getUTCMilliseconds()),N}return new Date(c+b+d)}const ke={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},ea=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,sa=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,aa=/^([+-])(\d{2})(?::?(\d{2}))?$/;function ta(a){const t={},l=a.split(ke.dateTimeDelimiter);let n;if(l.length>2)return t;if(/:/.test(l[0])?n=l[0]:(t.date=l[0],n=l[1],ke.timeZoneDelimiter.test(t.date)&&(t.date=a.split(ke.timeZoneDelimiter)[0],n=a.substr(t.date.length,a.length))),n){const i=ke.timezone.exec(n);i?(t.time=n.replace(i[1],""),t.timezone=i[1]):t.time=n}return t}function ra(a,t){const l=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),n=a.match(l);if(!n)return{year:NaN,restDateString:""};const i=n[1]?parseInt(n[1]):null,c=n[2]?parseInt(n[2]):null;return{year:c===null?i:c*100,restDateString:a.slice((n[1]||n[2]).length)}}function la(a,t){if(t===null)return new Date(NaN);const l=a.match(ea);if(!l)return new Date(NaN);const n=!!l[4],i=me(l[1]),c=me(l[2])-1,b=me(l[3]),d=me(l[4]),m=me(l[5])-1;if(n)return xa(t,d,m)?oa(t,d,m):new Date(NaN);{const N=new Date(0);return!da(t,c,b)||!ma(t,i)?new Date(NaN):(N.setUTCFullYear(t,c,Math.max(i,b)),N)}}function me(a){return a?parseInt(a):1}function na(a){const t=a.match(sa);if(!t)return NaN;const l=$e(t[1]),n=$e(t[2]),i=$e(t[3]);return ua(l,n,i)?l*rs+n*ls+i*1e3:NaN}function $e(a){return a&&parseFloat(a.replace(",","."))||0}function ia(a){if(a==="Z")return 0;const t=a.match(aa);if(!t)return 0;const l=t[1]==="+"?-1:1,n=parseInt(t[2]),i=t[3]&&parseInt(t[3])||0;return ha(n,i)?l*(n*rs+i*ls):NaN}function oa(a,t,l){const n=new Date(0);n.setUTCFullYear(a,0,4);const i=n.getUTCDay()||7,c=(t-1)*7+l+1-i;return n.setUTCDate(n.getUTCDate()+c),n}const ca=[31,null,31,30,31,30,31,31,30,31,30,31];function ns(a){return a%400===0||a%4===0&&a%100!==0}function da(a,t,l){return t>=0&&t<=11&&l>=1&&l<=(ca[t]||(ns(a)?29:28))}function ma(a,t){return t>=1&&t<=(ns(a)?366:365)}function xa(a,t,l){return t>=1&&t<=53&&l>=0&&l<=6}function ua(a,t,l){return a===24?t===0&&l===0:l>=0&&l<60&&t>=0&&t<60&&a>=0&&a<25}function ha(a,t){return t>=0&&t<=59}var Ee="Checkbox",[pa]=vs(Ee),[ba,Ge]=pa(Ee);function ja(a){const{__scopeCheckbox:t,checked:l,children:n,defaultChecked:i,disabled:c,form:b,name:d,onCheckedChange:m,required:N,value:I="on",internal_do_not_use_render:k}=a,[P,v]=ys({prop:l,defaultProp:i??!1,onChange:m,caller:Ee}),[R,E]=x.useState(null),[$,g]=x.useState(null),D=x.useRef(!1),Q=R?!!b||!!R.closest("form"):!0,se={checked:P,disabled:c,setChecked:v,control:R,setControl:E,name:d,form:b,value:I,hasConsumerStoppedPropagationRef:D,required:N,defaultChecked:H(i)?!1:i,isFormControl:Q,bubbleInput:$,setBubbleInput:g};return e.jsx(ba,{scope:t,...se,children:ga(k)?k(se):n})}var is="CheckboxTrigger",os=x.forwardRef(({__scopeCheckbox:a,onKeyDown:t,onClick:l,...n},i)=>{const{control:c,value:b,disabled:d,checked:m,required:N,setControl:I,setChecked:k,hasConsumerStoppedPropagationRef:P,isFormControl:v,bubbleInput:R}=Ge(is,a),E=ts(i,I),$=x.useRef(m);return x.useEffect(()=>{const g=c==null?void 0:c.form;if(g){const D=()=>k($.current);return g.addEventListener("reset",D),()=>g.removeEventListener("reset",D)}},[c,k]),e.jsx(Be.button,{type:"button",role:"checkbox","aria-checked":H(m)?"mixed":m,"aria-required":N,"data-state":hs(m),"data-disabled":d?"":void 0,disabled:d,value:b,...n,ref:E,onKeyDown:Ze(t,g=>{g.key==="Enter"&&g.preventDefault()}),onClick:Ze(l,g=>{k(D=>H(D)?!0:!D),R&&v&&(P.current=g.isPropagationStopped(),P.current||g.stopPropagation())})})});os.displayName=is;var cs=x.forwardRef((a,t)=>{const{__scopeCheckbox:l,name:n,checked:i,defaultChecked:c,required:b,disabled:d,value:m,onCheckedChange:N,form:I,...k}=a;return e.jsx(ja,{__scopeCheckbox:l,checked:i,defaultChecked:c,disabled:d,required:b,onCheckedChange:N,name:n,form:I,value:m,internal_do_not_use_render:({isFormControl:P})=>e.jsxs(e.Fragment,{children:[e.jsx(os,{...k,ref:t,__scopeCheckbox:l}),P&&e.jsx(us,{__scopeCheckbox:l})]})})});cs.displayName=Ee;var ds="CheckboxIndicator",ms=x.forwardRef((a,t)=>{const{__scopeCheckbox:l,forceMount:n,...i}=a,c=Ge(ds,l);return e.jsx(Ns,{present:n||H(c.checked)||c.checked===!0,children:e.jsx(Be.span,{"data-state":hs(c.checked),"data-disabled":c.disabled?"":void 0,...i,ref:t,style:{pointerEvents:"none",...a.style}})})});ms.displayName=ds;var xs="CheckboxBubbleInput",us=x.forwardRef(({__scopeCheckbox:a,...t},l)=>{const{control:n,hasConsumerStoppedPropagationRef:i,checked:c,defaultChecked:b,required:d,disabled:m,name:N,value:I,form:k,bubbleInput:P,setBubbleInput:v}=Ge(xs,a),R=ts(l,v),E=Ps(c),$=ws(n);x.useEffect(()=>{const D=P;if(!D)return;const Q=window.HTMLInputElement.prototype,_=Object.getOwnPropertyDescriptor(Q,"checked").set,K=!i.current;if(E!==c&&_){const De=new Event("click",{bubbles:K});D.indeterminate=H(c),_.call(D,H(c)?!1:c),D.dispatchEvent(De)}},[P,E,c,i]);const g=x.useRef(H(c)?!1:c);return e.jsx(Be.input,{type:"checkbox","aria-hidden":!0,defaultChecked:b??g.current,required:d,disabled:m,name:N,value:I,form:k,...t,tabIndex:-1,ref:R,style:{...t.style,...$,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});us.displayName=xs;function ga(a){return typeof a=="function"}function H(a){return a==="indeterminate"}function hs(a){return H(a)?"indeterminate":a?"checked":"unchecked"}function Qe({className:a,...t}){return e.jsx(cs,{"data-slot":"checkbox",className:ks("peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",a),...t,children:e.jsx(ms,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:e.jsx(Rs,{className:"size-3.5"})})})}const Ue={Volume2:Xs,Mic:Gs,Monitor:Fs,Laptop:Ls,Layout:Ce,Users:Os},za=()=>{const{user:a}=Cs(),{platformName:t}=Es(),l=Ds(),[n,i]=x.useState(!1),[c,b]=x.useState(!1),[d,m]=x.useState(null),[N,I]=x.useState("agenda"),[k,P]=x.useState(!1),[v,R]=x.useState(new Date),[E,$]=x.useState("all"),[g,D]=x.useState("all"),[Q,se]=x.useState(""),[_,K]=x.useState({name:"",totalQuantity:"",icon:"Layout"}),[De,U]=x.useState(!1),[Se,ae]=x.useState(""),[ps,xe]=x.useState(null),[O,ue]=x.useState(""),he=(a==null?void 0:a.role)==="ADMIN"||(a==null?void 0:a.role)==="CERIMONIAL",{data:p}=le({queryKey:["spaces-config"],queryFn:()=>A.getConfig().then(s=>s.data)}),{data:Z}=le({queryKey:["spaces"],queryFn:()=>A.getAll().then(s=>s.data)}),{data:T,isLoading:bs}=le({queryKey:["reservations",E,g],queryFn:()=>A.getReservations({status:E==="all"?void 0:E,spaceId:g==="all"?void 0:g}).then(s=>s.data)}),{data:u}=le({queryKey:["inventory"],queryFn:()=>ne.getAll().then(s=>s.data),enabled:!!a}),{data:te}=le({queryKey:["equipment-availability",v],queryFn:()=>ne.getAvailability(q(v,"yyyy-MM-dd")).then(s=>s.data),enabled:!!v}),Me=G({mutationFn:s=>A.createReservation(s),onSuccess:()=>{l.invalidateQueries(["reservations"]),i(!1),S.success("Solicitação enviada com sucesso!")},onError:s=>{var r,o;S.error(((o=(r=s.response)==null?void 0:r.data)==null?void 0:o.error)||"Erro ao enviar solicitação.")}}),Ye=G({mutationFn:({id:s,data:r})=>A.updateReservationStatus(s,r),onSuccess:()=>{l.invalidateQueries(["reservations"]),S.success("Status atualizado!")},onError:s=>{var r,o;S.error(((o=(r=s.response)==null?void 0:r.data)==null?void 0:o.error)||"Erro ao atualizar status.")}}),Je=G({mutationFn:s=>s.id?A.update(s.id,s):A.create(s),onSuccess:()=>{l.invalidateQueries(["spaces"]),b(!1),m(null),S.success("Local salvo com sucesso!")}}),js=G({mutationFn:s=>A.delete(s),onSuccess:()=>{l.invalidateQueries(["spaces"]),S.success("Local removido.")}}),Te=G({mutationFn:s=>A.updateConfig(s),onSuccess:()=>{l.invalidateQueries(["spaces-config"]),S.success("Configurações salvas!")},onError:s=>{S.error("Erro ao salvar configurações.")}}),pe=G({mutationFn:s=>s.id?ne.update(s.id,s):ne.create(s),onSuccess:()=>{l.invalidateQueries(["inventory"]),l.invalidateQueries(["equipment-availability"]),S.success("Equipamento salvo!"),K({name:"",totalQuantity:"",icon:"Layout"})},onError:s=>{var r,o;S.error(((o=(r=s.response)==null?void 0:r.data)==null?void 0:o.error)||"Erro ao salvar equipamento.")}}),gs=G({mutationFn:s=>ne.delete(s),onSuccess:()=>{l.invalidateQueries(["inventory"]),S.success("Equipamento removido.")}}),be=x.useMemo(()=>{if(!T)return{total:0,pending:0,approved:0,thisMonth:0};const s=new Date;return{total:T.length,pending:T.filter(r=>r.status==="PENDING").length,approved:T.filter(r=>r.status==="APPROVED").length,thisMonth:T.filter(r=>{const o=L(r.date);return o.getMonth()===s.getMonth()&&o.getFullYear()===s.getFullYear()}).length}},[T]),qe=x.useMemo(()=>T?T.filter(s=>Ms(L(s.date),v)):[],[T,v]),fs=async()=>{try{const s=await A.exportReservations({status:E==="all"?void 0:E,spaceId:g==="all"?void 0:g}),r=window.URL.createObjectURL(new Blob([s.data])),o=document.createElement("a");o.href=r,o.setAttribute("download","reservas_espacos.csv"),document.body.appendChild(o),o.click(),o.remove()}catch{S.error("Erro ao exportar dados.")}},Ke=s=>{const r={PENDING:{label:"Pendente",color:"bg-amber-100/80 text-amber-700 border-amber-200 shadow-sm",icon:ss},APPROVED:{label:"Aprovado",color:"bg-emerald-100/80 text-emerald-700 border-emerald-200 shadow-sm",icon:X},REJECTED:{label:"Rejeitado",color:"bg-rose-100/80 text-rose-700 border-rose-200 shadow-sm",icon:ee},REALLOCATED:{label:"Realocado",color:"bg-blue-100/80 text-blue-700 border-blue-200 shadow-sm",icon:Xe}},o=r[s]||r.PENDING,C=o.icon;return e.jsxs(V,{className:`px-2 py-1 flex items-center gap-1.5 font-black uppercase text-[9px] tracking-wider border transition-all ${o.color}`,children:[e.jsx(C,{className:"h-3 w-3"}),o.label]})};return e.jsxs("div",{className:"space-y-6 max-w-[1400px] mx-auto p-4 md:p-6 pb-20 lg:pb-6",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between gap-6 pb-2 border-b",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("h1",{className:"text-4xl font-extrabold tracking-tight text-slate-900 dark:text-slate-100",children:"Gestão de Espaços"}),e.jsxs("p",{className:"text-slate-500 dark:text-slate-400 font-medium",children:["Coordenação e Reservas de Ambientes • ",t||"SEDUC Eventos"]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[he&&e.jsxs(f,{onClick:fs,variant:"outline",className:"gap-2 border-slate-200 shadow-sm",children:[e.jsx(Ss,{className:"h-4 w-4"}),"Exportar CSV"]}),e.jsxs(Ae,{open:n,onOpenChange:i,children:[e.jsx(qs,{asChild:!0,children:e.jsxs(f,{className:"bg-blue-600 hover:bg-blue-700 text-white font-bold gap-2 shadow-lg shadow-blue-100 dark:shadow-none transition-all hover:scale-[1.02]",children:[e.jsx(we,{className:"h-5 w-5"}),"Nova Solicitação"]})}),e.jsxs(Ie,{className:"sm:max-w-[700px]",children:[e.jsxs(Oe,{children:[e.jsxs(Le,{className:"text-2xl flex items-center gap-3",children:[e.jsx(je,{className:"h-6 w-6 text-blue-600"}),"Solicitar Espaço"]}),e.jsx(We,{children:"Reserve um ambiente para seu evento. A equipe do Cerimonial analisará seu pedido."})]}),e.jsxs("form",{onSubmit:s=>{s.preventDefault();const r=new FormData(s.target),o=Object.fromEntries(r.entries()),C={};u==null||u.forEach(j=>{C[j.id]=r.get(j.id)==="on"}),Me.mutate({...o,equipment:C,date:q(v,"yyyy-MM-dd"),needsCerimonial:k})},className:"grid gap-6 py-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(h,{children:"Nome do Evento"}),e.jsx(M,{name:"eventTitle",placeholder:"Ex: Jornada Pedagógica",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(h,{children:"Número do Chamado (1Doc)"}),e.jsx(M,{name:"oneDocNumber",placeholder:"Ex: 12345/2026",required:!0})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(h,{children:"Setor Responsável"}),e.jsxs(fe,{name:"sector",required:!0,children:[e.jsx(ve,{children:e.jsx(Ne,{placeholder:"Selecione..."})}),e.jsx(ye,{children:p==null?void 0:p.sectors.map(s=>e.jsx(Y,{value:s,children:s},s))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(h,{children:"Local do Evento"}),e.jsxs(fe,{name:"spaceId",required:!0,children:[e.jsx(ve,{children:e.jsx(Ne,{placeholder:"Selecione o local"})}),e.jsx(ye,{children:Z==null?void 0:Z.map(s=>e.jsxs(Y,{value:s.id,children:[s.name," (",s.capacity," pessoas)"]},s.id))})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(h,{children:"Data do Evento"}),e.jsx(M,{name:"date",type:"date",value:q(v,"yyyy-MM-dd"),onChange:s=>R(L(s.target.value)),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(h,{children:"Início"}),e.jsx(M,{name:"startTime",type:"time",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(h,{children:"Término"}),e.jsx(M,{name:"endTime",type:"time",required:!0})]})]}),e.jsxs("div",{className:"space-y-4 pt-2 border-t",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(h,{className:"text-base font-bold",children:"Apoio do Cerimonial"}),e.jsx("p",{className:"text-xs text-slate-500",children:"Solicitar presença de um cerimonialista no evento."})]}),e.jsx(Qe,{checked:k,onCheckedChange:P,className:"h-6 w-6"})]}),k&&e.jsxs("div",{className:"space-y-2 animate-in fade-in slide-in-from-top-1",children:[e.jsx(h,{className:"text-blue-600 font-bold",children:"Link da Minuta/Roteiro (Google Docs)"}),e.jsx(M,{name:"eventScriptUrl",placeholder:"https://docs.google.com/document/d/...",required:k}),e.jsx("p",{className:"text-[10px] text-slate-400 italic",children:"* Certifique-se de que o documento esteja público ou compartilhado com o cerimonial."})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(h,{children:"Descrição"}),e.jsx(_e,{name:"description",placeholder:"Objetivo do evento e observações...",rows:3})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(h,{className:"text-base font-semibold",children:"Equipamentos e Serviços"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:[(u||[]).filter(s=>{const r=(p==null?void 0:p.equipment)||[];return r.some(C=>u.some(j=>j.id===C))?r.includes(s.id):!0}).map(s=>{const r=Ue[s.icon]||Ce;return e.jsxs("div",{className:"flex items-center space-x-2 border rounded-xl p-3 hover:bg-blue-50 dark:hover:bg-slate-800 transition-colors border-slate-200",children:[e.jsx(Qe,{id:s.id,name:s.id}),e.jsxs(h,{htmlFor:s.id,className:"flex items-center gap-2 cursor-pointer font-medium text-sm",children:[e.jsx(r,{className:"h-4 w-4 text-blue-500"}),s.name]})]},s.id)}),(u==null?void 0:u.length)===0&&e.jsx("p",{className:"text-xs text-slate-400 col-span-full italic",children:"Nenhum equipamento cadastrado no inventário."})]})]}),e.jsx(Fe,{children:e.jsx(f,{type:"submit",disabled:Me.isPending,className:"w-full h-12 text-lg bg-blue-600 hover:bg-blue-700",children:Me.isPending?"Processando...":"Enviar Solicitação"})})]})]})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[{label:"Total Geral",value:be.total,color:"blue",icon:je},{label:"Pendentes",value:be.pending,color:"amber",icon:ss},{label:"Aprovados",value:be.approved,color:"green",icon:X},{label:"Ocupação/Mês",value:be.thisMonth,color:"purple",icon:Ks}].map((s,r)=>e.jsxs(z,{className:`border-none shadow-sm bg-${s.color}-500 text-white overflow-hidden relative`,children:[e.jsxs("div",{className:"p-5 relative z-10",children:[e.jsx("p",{className:`text-${s.color}-50 text-xs font-bold uppercase tracking-wider`,children:s.label}),e.jsx("h3",{className:"text-3xl font-black mt-1",children:s.value})]}),e.jsx(s.icon,{className:"absolute -right-4 -bottom-4 h-24 w-24 text-white opacity-10"})]},r))}),e.jsxs(As,{defaultValue:"agenda",className:"w-full",onValueChange:I,children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4 mb-4",children:[e.jsxs(Is,{className:"bg-slate-100 dark:bg-slate-800 p-1 h-auto grid grid-cols-2 lg:flex w-full md:w-auto",children:[e.jsx(ce,{value:"agenda",className:"data-[state=active]:bg-white dark:data-[state=active]:bg-slate-950 py-2 px-6",children:"Agenda"}),e.jsx(ce,{value:"pedidos",className:"data-[state=active]:bg-white py-2 px-6",children:"Pedidos"}),he&&e.jsxs(e.Fragment,{children:[e.jsx(ce,{value:"locais",className:"data-[state=active]:bg-white py-2 px-6",children:"Locais"}),e.jsx(ce,{value:"inventario",className:"data-[state=active]:bg-white py-2 px-6",children:"Inventário"}),e.jsx(ce,{value:"config",className:"data-[state=active]:bg-white py-2 px-6",children:"Formulário"})]})]}),(N==="agenda"||N==="pedidos")&&e.jsxs("div",{className:"flex items-center gap-2 w-full md:w-auto",children:[e.jsxs("div",{className:"relative flex-1 md:w-64",children:[e.jsx(_s,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-400"}),e.jsx(M,{placeholder:"Buscar evento...",className:"pl-10 h-10 border-slate-200",value:Q,onChange:s=>se(s.target.value)})]}),e.jsxs(fe,{value:E,onValueChange:$,children:[e.jsxs(ve,{className:"w-[140px] h-10",children:[e.jsx(Hs,{className:"h-4 w-4 mr-2"}),e.jsx(Ne,{placeholder:"Status"})]}),e.jsxs(ye,{children:[e.jsx(Y,{value:"all",children:"Todos"}),e.jsx(Y,{value:"PENDING",children:"Pendentes"}),e.jsx(Y,{value:"APPROVED",children:"Aprovados"}),e.jsx(Y,{value:"REJECTED",children:"Rejeitados"})]})]})]})]}),e.jsx(de,{value:"agenda",className:"m-0",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8 mt-6",children:[e.jsx("div",{className:"lg:col-span-4",children:e.jsxs(z,{className:"border-none shadow-md overflow-hidden bg-white dark:bg-slate-950",children:[e.jsx(ie,{className:"bg-blue-600 text-white p-6",children:e.jsxs(oe,{className:"text-xl flex items-center gap-2",children:[e.jsx(je,{className:"h-5 w-5"}),q(v,"MMMM yyyy",{locale:Re})]})}),e.jsx(W,{className:"p-4",children:e.jsx(Ts,{mode:"single",selected:v,onSelect:s=>s&&R(s),className:"w-full",locale:Re})})]})}),e.jsxs("div",{className:"lg:col-span-8 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-black text-slate-800 dark:text-slate-100 italic",children:q(v,"EEEE, dd 'de' MMMM",{locale:Re})}),e.jsxs(V,{variant:"secondary",className:"bg-slate-200 text-slate-800",children:[qe.length," Eventos"]})]}),e.jsx("div",{className:"bg-white dark:bg-slate-950 border rounded-3xl overflow-hidden shadow-xl min-h-[600px]",children:bs?e.jsx("div",{className:"flex items-center justify-center h-[600px] bg-slate-50/50 backdrop-blur-sm",children:e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx("div",{className:"animate-spin h-8 w-8 border-4 border-blue-600 border-t-transparent rounded-full"}),e.jsx("p",{className:"text-slate-500 font-bold",children:"Sincronizando compromissos..."})]})}):qe.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center h-[600px] text-center p-8",children:[e.jsx("div",{className:"h-24 w-24 bg-slate-50 dark:bg-slate-900 rounded-full flex items-center justify-center shadow-inner mb-6",children:e.jsx(je,{className:"h-12 w-12 text-slate-300"})}),e.jsx("h3",{className:"text-2xl font-black text-slate-900 dark:text-slate-100 mb-2 italic",children:"Agenda Livre"}),e.jsx("p",{className:"text-slate-500 max-w-sm mx-auto font-medium",children:"Não há eventos registrados para este dia. Que tal iniciar uma nova solicitação?"}),e.jsxs(f,{className:"mt-8 bg-blue-600 hover:bg-blue-700 h-12 px-8 rounded-2xl shadow-lg shadow-blue-200 transition-all hover:scale-105",onClick:()=>i(!0),children:[e.jsx(we,{className:"h-5 w-5 mr-2"}),"Nova Solicitação"]})]}):e.jsx("div",{className:"p-6 space-y-6 max-h-[800px] overflow-y-auto custom-scrollbar",children:qe.sort((s,r)=>(s.startTime||"").localeCompare(r.startTime||"")).map(s=>{var C;const r=L(s.startTime),o=L(s.endTime);return e.jsx("div",{className:"relative group animate-in fade-in slide-in-from-bottom-4 duration-300",children:e.jsxs("div",{className:"flex gap-6",children:[e.jsxs("div",{className:"w-24 flex-shrink-0 pt-2 text-right",children:[e.jsx("div",{className:"text-lg font-black text-slate-900 dark:text-white leading-none",children:r?q(r,"HH:mm"):"--:--"}),e.jsxs("div",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest mt-1",children:["até ",o?q(o,"HH:mm"):"--:--"]})]}),e.jsxs("div",{className:"relative flex flex-col items-center",children:[e.jsx("div",{className:`h-4 w-4 rounded-full border-4 border-white dark:border-slate-950 shadow-md z-10 
                                                                ${s.status==="APPROVED"?"bg-emerald-500":"bg-amber-500"}`}),e.jsx("div",{className:"flex-1 w-0.5 bg-slate-100 dark:bg-slate-800 absolute top-4 bottom-0 -z-0"})]}),e.jsxs("div",{className:`flex-1 rounded-3xl p-5 border-2 transition-all hover:shadow-xl hover:-translate-y-1
                                                            ${s.status==="APPROVED"?"bg-emerald-50/30 border-emerald-100 dark:bg-emerald-950/10 dark:border-emerald-900/30":"bg-amber-50/30 border-amber-100 dark:bg-amber-950/10 dark:border-amber-900/30"}`,children:[e.jsxs("div",{className:"flex items-start justify-between gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h4",{className:"text-xl font-black text-slate-900 dark:text-white tracking-tight",children:s.eventTitle}),Ke(s.status)]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-xs font-bold text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/20 px-2 py-0.5 rounded-lg uppercase",children:s.sector}),e.jsxs("span",{className:"text-[10px] font-black text-slate-400 uppercase tracking-tighter",children:["1Doc: ",s.oneDocNumber||"N/A"]})]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("div",{className:"flex flex-col items-end gap-1",children:[e.jsxs("span",{className:"text-xs font-bold text-slate-500 flex items-center gap-1.5",children:[e.jsx(Xe,{className:"h-3.5 w-3.5 text-rose-500"}),(C=s.space)==null?void 0:C.name]}),e.jsxs("span",{className:"text-[10px] font-black text-slate-400 uppercase",children:["Sol: ",s.requesterName]})]})})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[s.needsCerimonial&&e.jsx(V,{variant:"outline",className:"bg-indigo-50 text-indigo-600 border-indigo-100 text-[10px] font-black uppercase",children:"Apoio Cerimonial"}),s.equipment&&Object.entries(s.equipment).map(([j,re])=>{if(!re)return null;const B=u==null?void 0:u.find(Pe=>Pe.id===j);return e.jsx(V,{variant:"outline",className:"text-[10px] bg-slate-50/50 text-slate-500 font-bold",children:(B==null?void 0:B.name)||j},j)})]}),s.observations&&e.jsxs("div",{className:`p-4 rounded-2xl border flex gap-3 animate-in zoom-in-95 duration-500
                                                                    ${s.status==="REJECTED"?"bg-rose-50 border-rose-100 text-rose-700":"bg-blue-50 border-blue-100 text-blue-700"}`,children:[e.jsx("div",{className:"h-8 w-8 rounded-full bg-white flex items-center justify-center flex-shrink-0 shadow-sm border border-inherit",children:s.status==="REJECTED"?e.jsx(ee,{className:"h-4 w-4"}):e.jsx(X,{className:"h-4 w-4"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] font-black uppercase tracking-widest mb-1 opacity-70",children:"Nota do Gestor"}),e.jsxs("p",{className:"text-sm font-medium italic",children:['"',s.observations,'"']})]})]}),he&&s.status==="PENDING"&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-100 dark:border-slate-800 flex gap-3",children:[e.jsxs(f,{size:"sm",variant:"outline",className:"h-9 px-4 rounded-xl text-rose-600 border-rose-200 hover:bg-rose-50",onClick:j=>{j.stopPropagation(),xe(s),ue("REJECTED"),ae(""),U(!0)},children:[e.jsx(ee,{className:"h-4 w-4 mr-2"}),"Indisponibilizar"]}),e.jsxs(f,{size:"sm",className:"h-9 px-4 rounded-xl bg-emerald-600 hover:bg-emerald-700 shadow-md shadow-emerald-100",onClick:j=>{j.stopPropagation(),xe(s),ue("APPROVED"),ae(""),U(!0)},children:[e.jsx(X,{className:"h-4 w-4 mr-2"}),"Aprovar Espaço"]})]})]})]})},s.id)})})})]})]})}),e.jsx(de,{value:"pedidos",children:e.jsx(z,{className:"border-none shadow-md overflow-hidden bg-white dark:bg-slate-950",children:e.jsxs(ze,{children:[e.jsx(Ve,{className:"bg-slate-50 dark:bg-slate-900 border-b",children:e.jsxs(J,{children:[e.jsx(w,{className:"font-bold",children:"Evento"}),e.jsx(w,{className:"font-bold",children:"Solicitante"}),e.jsx(w,{className:"font-bold",children:"Apoios"}),e.jsx(w,{className:"font-bold",children:"Data/Hora"}),e.jsx(w,{className:"font-bold",children:"Local"}),e.jsx(w,{className:"font-bold text-center",children:"Status"}),e.jsx(w,{className:"font-bold text-right",children:"Ações"})]})}),e.jsx(He,{children:T==null?void 0:T.filter(s=>s.eventTitle.toLowerCase().includes(Q.toLowerCase())||s.requesterName.toLowerCase().includes(Q.toLowerCase())).map(s=>{var r;return e.jsxs(J,{children:[e.jsxs(y,{children:[e.jsx("div",{className:"font-bold",children:s.eventTitle}),e.jsxs("div",{className:"text-[10px] text-slate-400 font-bold uppercase",children:["1Doc: ",s.oneDocNumber||"N/A"]}),e.jsx("div",{className:"text-[10px] text-slate-500 uppercase",children:s.sector})]}),e.jsx(y,{className:"text-sm font-medium",children:s.requesterName}),e.jsx(y,{children:e.jsxs("div",{className:"flex flex-wrap gap-1",children:[s.needsCerimonial&&e.jsx(V,{variant:"outline",className:"text-[10px] bg-blue-50 text-blue-600 border-blue-200",children:"Cerimonial"}),s.equipment&&Object.entries(s.equipment).map(([o,C])=>{if(!C)return null;const j=u==null?void 0:u.find(re=>re.id===o);return e.jsx(V,{variant:"outline",className:"text-[10px] bg-slate-50 text-slate-500 border-slate-200",children:(j==null?void 0:j.name)||o},o)})]})}),e.jsxs(y,{children:[e.jsx("div",{className:"text-sm font-bold",children:q(L(s.date),"dd/MM/yyyy")}),e.jsxs("div",{className:"text-xs text-slate-500 whitespace-nowrap",children:[q(L(s.startTime),"HH:mm")," - ",q(L(s.endTime),"HH:mm")]})]}),e.jsx(y,{className:"text-sm font-bold text-blue-600",children:(r=s.space)==null?void 0:r.name}),e.jsx(y,{className:"text-center",children:e.jsxs("div",{className:"flex flex-col items-center gap-1",children:[Ke(s.status),s.observations&&e.jsxs("p",{className:"text-[10px] text-slate-400 italic font-medium max-w-[120px] truncate",title:s.observations,children:['"',s.observations,'"']})]})}),e.jsx(y,{className:"text-right",children:he?s.status==="PENDING"?e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsxs(f,{variant:"outline",size:"sm",className:"h-8 text-red-600 border-red-200 hover:bg-red-50",onClick:()=>{xe(s),ue("REJECTED"),ae(""),U(!0)},children:[e.jsx(ee,{className:"h-4 w-4 mr-1"})," Rejeitar"]}),e.jsxs(f,{size:"sm",className:"h-8 bg-green-600 hover:bg-green-700",onClick:()=>{xe(s),ue("APPROVED"),ae(""),U(!0)},children:[e.jsx(X,{className:"h-4 w-4 mr-1"})," Aprovar"]})]}):e.jsxs(f,{variant:"ghost",size:"sm",className:"h-8 text-slate-400 gap-1",onClick:()=>Ye.mutate({id:s.id,data:{status:"PENDING"}}),children:[e.jsx(Qs,{className:"h-4 w-4"})," Voltar para Pendente"]}):e.jsx("span",{className:"text-xs text-slate-400 italic font-medium",children:"Apenas Leitura"})})]},s.id)})})]})})}),e.jsxs(de,{value:"locais",children:[e.jsxs(z,{className:"border-none shadow-md bg-white dark:bg-slate-950",children:[e.jsxs(ie,{className:"flex flex-row items-center justify-between border-b bg-slate-50/50 dark:bg-slate-900/50 p-6",children:[e.jsxs("div",{children:[e.jsx(oe,{className:"text-xl font-black",children:"Auditórios e Salas"}),e.jsx(ge,{children:"Gerencie os locais disponíveis para reserva."})]}),e.jsxs(f,{className:"bg-blue-600 font-bold gap-2",onClick:()=>{m(null),b(!0)},children:[e.jsx(we,{className:"h-4 w-4"})," Novo Local"]})]}),e.jsx(W,{className:"p-0",children:e.jsxs(ze,{children:[e.jsx(Ve,{children:e.jsxs(J,{children:[e.jsx(w,{children:"Nome"}),e.jsx(w,{children:"Capacidade"}),e.jsx(w,{children:"Localização"}),e.jsx(w,{className:"text-right",children:"Ações"})]})}),e.jsx(He,{children:Z==null?void 0:Z.map(s=>e.jsxs(J,{children:[e.jsx(y,{className:"font-bold text-slate-800 dark:text-slate-100",children:s.name}),e.jsxs(y,{className:"font-medium text-slate-600",children:[s.capacity," Pessoas"]}),e.jsx(y,{className:"text-slate-500 text-sm",children:s.location}),e.jsxs(y,{className:"text-right space-x-1",children:[e.jsx(f,{variant:"ghost",size:"icon",className:"h-8 w-8 text-blue-600",onClick:()=>{m(s),b(!0)},children:e.jsx(es,{className:"h-4 w-4"})}),e.jsx(f,{variant:"ghost",size:"icon",className:"h-8 w-8 text-red-600",onClick:()=>js.mutate(s.id),children:e.jsx(as,{className:"h-4 w-4"})})]})]},s.id))})]})})]}),e.jsx(Ae,{open:c,onOpenChange:b,children:e.jsxs(Ie,{children:[e.jsx(Oe,{children:e.jsx(Le,{children:d?"Editar Local":"Novo Local"})}),e.jsxs("form",{onSubmit:s=>{s.preventDefault();const r=new FormData(s.target);Je.mutate({id:d==null?void 0:d.id,...Object.fromEntries(r.entries())})},className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(h,{children:"Nome do Local"}),e.jsx(M,{name:"name",defaultValue:d==null?void 0:d.name,placeholder:"Ex: Auditório II",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(h,{children:"Capacidade (Aprox.)"}),e.jsx(M,{name:"capacity",type:"number",defaultValue:d==null?void 0:d.capacity,required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(h,{children:"Endereço/Bloco"}),e.jsx(M,{name:"location",defaultValue:d==null?void 0:d.location,placeholder:"Ex: Bloco A - Primeiro Andar"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(h,{children:"Descrição"}),e.jsx(_e,{name:"description",defaultValue:d==null?void 0:d.description})]}),e.jsx(Fe,{children:e.jsx(f,{type:"submit",className:"w-full bg-blue-600",disabled:Je.isPending,children:"Salvar Local"})})]})]})})]}),e.jsx(de,{value:"inventario",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[e.jsxs(z,{className:"lg:col-span-1 border-none shadow-md bg-white dark:bg-slate-950 h-fit",children:[e.jsxs(ie,{className:"bg-slate-50 dark:bg-slate-900/50 border-b",children:[e.jsx(oe,{className:"text-lg font-bold",children:"Gestão de Itens"}),e.jsx(ge,{children:"Cadastre a quantidade total disponível."})]}),e.jsx(W,{className:"p-4",children:e.jsxs("form",{onSubmit:s=>{s.preventDefault(),pe.mutate({..._,totalQuantity:parseInt(_.totalQuantity)||0})},className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(h,{children:"Nome do Equipamento"}),e.jsx(M,{value:_.name,onChange:s=>K(r=>({...r,name:s.target.value})),placeholder:"Ex: Projetor Epson",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(h,{children:"Qtd. Total em Estoque"}),e.jsx(M,{type:"number",value:_.totalQuantity,onChange:s=>K(r=>({...r,totalQuantity:s.target.value})),placeholder:"0",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(h,{children:"Ícone (Lucide)"}),e.jsxs(fe,{value:_.icon,onValueChange:s=>K(r=>({...r,icon:s})),children:[e.jsx(ve,{children:e.jsx(Ne,{})}),e.jsx(ye,{children:Object.keys(Ue).map(s=>e.jsx(Y,{value:s,children:s},s))})]})]}),e.jsx(f,{type:"submit",className:"w-full bg-blue-600 font-bold",disabled:pe.isPending,children:pe.isPending?"Salvando...":"Adicionar ao Estoque"})]})})]}),e.jsxs("div",{className:"lg:col-span-3 space-y-6",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:u==null?void 0:u.map(s=>e.jsx(z,{className:"border-none shadow-sm hover:shadow-md transition-shadow",children:e.jsxs(W,{className:"p-5 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"h-12 w-12 bg-blue-50 dark:bg-slate-800 rounded-2xl flex items-center justify-center",children:(()=>{const r=Ue[s.icon]||Ce;return e.jsx(r,{className:"h-6 w-6 text-blue-600"})})()}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-slate-900 dark:text-slate-100",children:s.name}),e.jsxs("p",{className:"text-xs text-slate-500 font-medium tracking-tight",children:["Capacidade total: ",s.totalQuantity," unidades"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(f,{variant:"ghost",size:"icon",className:"h-8 w-8 text-blue-600",onClick:()=>{const r=window.prompt(`Nova quantidade para ${s.name}:`,s.totalQuantity);r!==null&&pe.mutate({...s,totalQuantity:r})},children:e.jsx(es,{className:"h-4 w-4"})}),e.jsx(f,{variant:"ghost",size:"icon",className:"h-8 w-8 text-red-500",onClick:()=>gs.mutate(s.id),children:e.jsx(as,{className:"h-4 w-4"})})]})]})},s.id))}),e.jsxs(z,{className:"border-none shadow-md bg-white dark:bg-slate-950",children:[e.jsxs(ie,{className:"flex flex-row items-center justify-between border-b bg-slate-50/50 p-6",children:[e.jsxs("div",{children:[e.jsx(oe,{className:"text-xl font-black",children:"Disponibilidade por Dia"}),e.jsxs(ge,{children:["Ocupação dos itens em ",q(v,"dd/MM/yyyy")]})]}),e.jsx(M,{type:"date",className:"w-40",value:q(v,"yyyy-MM-dd"),onChange:s=>R(L(s.target.value))})]}),e.jsx(W,{className:"p-0",children:e.jsxs(ze,{children:[e.jsx(Ve,{children:e.jsxs(J,{children:[e.jsx(w,{children:"Item"}),e.jsx(w,{className:"text-center",children:"Total"}),e.jsx(w,{className:"text-center",children:"Em Uso"}),e.jsx(w,{className:"text-center",children:"Disponível"}),e.jsx(w,{className:"text-right",children:"Status"})]})}),e.jsxs(He,{children:[te==null?void 0:te.map(s=>e.jsxs(J,{children:[e.jsx(y,{className:"font-bold",children:s.name}),e.jsx(y,{className:"text-center font-medium",children:s.totalQuantity}),e.jsx(y,{className:"text-center text-red-500 font-bold",children:s.used}),e.jsx(y,{className:"text-center text-green-600 font-bold",children:s.available}),e.jsx(y,{className:"text-right",children:e.jsx(V,{className:s.available>0?"bg-green-100 text-green-700":"bg-red-100 text-red-700",children:s.available>0?"Disponível":"Esgotado"})})]},s.id)),(!te||te.length===0)&&e.jsx(J,{children:e.jsx(y,{colSpan:5,className:"text-center py-8 text-slate-400 font-medium italic",children:"Nenhum equipamento cadastrado."})})]})]})})]})]})]})}),e.jsx(de,{value:"config",children:e.jsxs(z,{className:"border-none shadow-md bg-white dark:bg-slate-950",children:[e.jsxs(ie,{className:"bg-slate-50 dark:bg-slate-900/50 border-b",children:[e.jsx(oe,{className:"text-xl font-black italic",children:"Setores do Formulário"}),e.jsx(ge,{children:"Edite a lista de setores responsáveis que aparecem para o organizador."})]}),e.jsxs(W,{className:"p-6 space-y-8",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx(h,{className:"text-lg font-bold",children:"Equipamentos Habilitados no Formulário"}),e.jsx("p",{className:"text-sm text-slate-500",children:"Selecione quais itens do inventário aparecerão para os usuários."}),e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-3 gap-3",children:[u==null?void 0:u.map(s=>{var o;const r=(o=p==null?void 0:p.equipment)==null?void 0:o.includes(s.id);return e.jsxs("div",{className:`flex items-center space-x-2 border rounded-xl p-3 transition-colors ${r?"bg-blue-50 border-blue-200 dark:bg-blue-900/20":"bg-slate-50 border-slate-200"}`,children:[e.jsx(Qe,{id:`config-${s.id}`,checked:r,onCheckedChange:C=>{const j=((p==null?void 0:p.equipment)||[]).filter(B=>u.some(Pe=>Pe.id===B)),re=C?[...j,s.id]:j.filter(B=>B!==s.id);Te.mutate({...p,equipment:re})}}),e.jsx(h,{htmlFor:`config-${s.id}`,className:"text-sm font-semibold cursor-pointer flex-1",children:s.name})]},s.id)}),(!u||u.length===0)&&e.jsxs("div",{className:"col-span-full p-6 border border-dashed rounded-xl flex flex-col items-center gap-2 bg-slate-50",children:[e.jsx(Ce,{className:"h-8 w-8 text-slate-300"}),e.jsx("p",{className:"text-sm text-slate-500 font-medium",children:"Cadastre itens no Inventário primeiro."})]})]})]}),e.jsxs("div",{className:"space-y-4 pt-8 border-t",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(h,{className:"text-lg font-bold",children:"Setores Responsáveis"}),e.jsx(f,{size:"sm",variant:"outline",onClick:()=>{const s=window.prompt("Nome do Setor:");if(s){const r=[...(p==null?void 0:p.sectors)||[],s];Te.mutate({...p,sectors:r})}},children:e.jsx(we,{className:"h-4 w-4"})})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:p==null?void 0:p.sectors.map((s,r)=>e.jsxs(V,{variant:"secondary",className:"px-3 py-1 gap-2 bg-white border border-slate-200",children:[s,e.jsx("button",{className:"text-red-500",onClick:()=>{const o=p.sectors.filter((C,j)=>j!==r);Te.mutate({...p,sectors:o})},children:e.jsx(ee,{className:"h-3 w-3"})})]},r))})]})]})]})})]}),e.jsx(Ae,{open:De,onOpenChange:U,children:e.jsxs(Ie,{children:[e.jsxs(Oe,{children:[e.jsx(Le,{className:"flex items-center gap-2",children:O==="APPROVED"?e.jsxs(e.Fragment,{children:[e.jsx(X,{className:"h-5 w-5 text-green-600"})," Aprovar com Observação"]}):e.jsxs(e.Fragment,{children:[e.jsx(ee,{className:"h-5 w-5 text-red-600"})," Motivo da Rejeição"]})}),e.jsx(We,{children:O==="APPROVED"?"Adicione alguma observação importante para o solicitante (opcional).":"Por favor, informe ao organizador o motivo pelo qual a solicitação foi negada."})]}),e.jsxs("div",{className:"py-4",children:[e.jsx(h,{htmlFor:"observation",className:"mb-2 block font-bold",children:O==="APPROVED"?"Observações Internas/Externas":"Motivo"}),e.jsx(_e,{id:"observation",placeholder:O==="APPROVED"?"Ex: Aprovado, mas o projetor do local está em manutenção...":"Ex: O local já estará ocupado por uma manutenção preventiva...",value:Se,onChange:s=>ae(s.target.value),rows:4,required:O==="REJECTED"})]}),e.jsxs(Fe,{className:"gap-2 sm:gap-0",children:[e.jsx(f,{variant:"ghost",onClick:()=>U(!1),children:"Cancelar"}),e.jsxs(f,{className:O==="APPROVED"?"bg-green-600 hover:bg-green-700":"bg-red-600 hover:bg-red-700",onClick:()=>{if(O==="REJECTED"&&!Se){S.error("O motivo da rejeição é obrigatório.");return}Ye.mutate({id:ps.id,data:{status:O,observations:Se}}),U(!1)},children:["Confirmar ",O==="APPROVED"?"Aprovação":"Rejeição"]})]})]})})]})};export{za as default};
