import{ae as y,b as P,r,j as e,s as C,L as S,B as n,c as E,aC as L,v as A}from"./index-D96FZGJW.js";import{I as u}from"./input-DDdIEpJM.js";import{L as w}from"./label-MJqwl0kV.js";import{C as f,d as b,a as D,b as I,c as z}from"./card-DGXvG8EM.js";import{A as F,a as O}from"./alert-DgGC3m4d.js";import{E as R}from"./eye-off-CI6sPoxc.js";import{E as q}from"./eye-BePXvB9z.js";const M=()=>{const[p]=y(),o=p.get("token"),g=P(),[a,j]=r.useState({newPassword:"",confirmPassword:""}),[l,N]=r.useState(!1),[d,i]=r.useState(!1),[c,s]=r.useState(""),h=t=>{j({...a,[t.target.name]:t.target.value})},v=async t=>{var x,m;if(t.preventDefault(),s(""),a.newPassword!==a.confirmPassword){s("As senhas não coincidem.");return}if(a.newPassword.length<6){s("A senha deve ter pelo menos 6 caracteres.");return}i(!0);try{await L.resetPassword({token:o,newPassword:a.newPassword}),A.success("Senha redefinida com sucesso!"),g("/login")}catch(k){s(((m=(x=k.response)==null?void 0:x.data)==null?void 0:m.error)||"Erro ao redefinir senha. O link pode ter expirado.")}finally{i(!1)}};return o?e.jsxs("div",{className:"auth-container min-h-screen flex items-center justify-center p-4",children:[e.jsxs("div",{className:"fixed inset-0 overflow-hidden -z-10 pointer-events-none",children:[e.jsx("div",{className:"absolute -top-[10%] -right-[10%] w-[40%] h-[40%] bg-blue-500/10 blur-[120px] rounded-full"}),e.jsx("div",{className:"absolute -bottom-[10%] -left-[10%] w-[40%] h-[40%] bg-purple-500/10 blur-[120px] rounded-full"})]}),e.jsxs("div",{className:"w-full max-w-md z-1",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-3xl font-bold text-slate-900 dark:text-white mb-2",children:"Nova Senha"}),e.jsx("p",{className:"text-slate-600 dark:text-gray-400",children:"Escolha uma senha forte para sua segurança"})]}),e.jsxs(f,{className:"bg-white/90 dark:bg-slate-900/80 backdrop-blur-xl border-slate-200 dark:border-white/10 shadow-2xl",children:[e.jsxs(D,{children:[e.jsx(I,{className:"text-xl text-slate-900 dark:text-white",children:"Redefinir Senha"}),e.jsx(z,{className:"text-slate-600 dark:text-gray-400",children:"Insira sua nova senha abaixo."})]}),e.jsx(b,{children:e.jsxs("form",{onSubmit:v,className:"space-y-6",children:[c&&e.jsx(F,{variant:"destructive",className:"bg-red-500/10 border-red-500/20 text-red-400",children:e.jsx(O,{children:c})}),e.jsxs("div",{className:"space-y-2 text-left",children:[e.jsx(w,{htmlFor:"newPassword",title:"text-slate-700 dark:text-gray-300",children:"Nova Senha"}),e.jsxs("div",{className:"relative",children:[e.jsx(u,{id:"newPassword",name:"newPassword",type:l?"text":"password",value:a.newPassword,onChange:h,className:"bg-slate-50 dark:bg-white/5 border-slate-300 dark:border-white/10 text-slate-900 dark:text-white placeholder:text-slate-400 dark:placeholder:text-gray-600 focus:ring-blue-500/50",required:!0}),e.jsx(n,{type:"button",variant:"ghost",size:"icon",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent text-gray-500",onClick:()=>N(!l),children:l?e.jsx(R,{className:"h-4 w-4"}):e.jsx(q,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"space-y-2 text-left",children:[e.jsx(w,{htmlFor:"confirmPassword",title:"text-slate-700 dark:text-gray-300",children:"Confirmar Nova Senha"}),e.jsx(u,{id:"confirmPassword",name:"confirmPassword",type:"password",value:a.confirmPassword,onChange:h,className:"bg-slate-50 dark:bg-white/5 border-slate-300 dark:border-white/10 text-slate-900 dark:text-white placeholder:text-slate-400 dark:placeholder:text-gray-600 focus:ring-blue-500/50",required:!0})]}),e.jsxs(n,{type:"submit",className:"w-full bg-blue-600 hover:bg-blue-700 text-white shadow-lg shadow-blue-500/20",disabled:d,children:[d?e.jsx(E,{className:"mr-2 h-4 w-4 animate-spin"}):null,"Salvar Nova Senha"]})]})})]})]})]}):e.jsx("div",{className:"auth-container min-h-screen flex items-center justify-center p-4",children:e.jsx(f,{className:"max-w-md w-full text-center bg-white/90 dark:bg-slate-900/80 backdrop-blur-xl border-slate-200 dark:border-white/10 shadow-2xl",children:e.jsxs(b,{className:"pt-10 pb-10 space-y-6",children:[e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"p-3 bg-red-500/10 rounded-full",children:e.jsx(C,{className:"h-12 w-12 text-red-500"})})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"Link Inválido"}),e.jsx("p",{className:"text-slate-600 dark:text-gray-400",children:"O token de redefinição não foi encontrado ou é inválido."})]}),e.jsx(S,{to:"/login",className:"block",children:e.jsx(n,{variant:"outline",className:"w-full",children:"Voltar para o Login"})})]})})})};export{M as default};
