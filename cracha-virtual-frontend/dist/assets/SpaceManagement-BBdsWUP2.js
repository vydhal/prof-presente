import{f as _,r,j as e,M as us,a3 as ps,a2 as He,a0 as bs,K as es,O as Ue,at as js,F as vs,a as gs,u as fs,o as Ns,p as re,q as J,B as u,a8 as ys,C as be,v as E,au as T,av as ne}from"./index-D96FZGJW.js";import{C as V,a as oe,b as ie,d as Z,c as je}from"./card-DGXvG8EM.js";import{I as S}from"./input-DDdIEpJM.js";import{B as z}from"./badge-B3h_Dmat.js";import{i as ws,S as ve,a as ge,b as fe,c as Ne,d as U,f as q,e as ks,p as De}from"./calendar-_mdhbU9r.js";import{D as Ae,a as Cs,b as Re,c as Te,d as Ie,e as Ke,f as Oe}from"./dialog-Bl-WjPsE.js";import{L as c}from"./label-MJqwl0kV.js";import{T as Le}from"./textarea-CEySCzb7.js";import{u as Es}from"./index-BvIB1H5F.js";import{C as Ss}from"./check-CcSBviJm.js";import{T as Ms,a as qs,b as ce,c as de}from"./tabs-CkfKOB4p.js";import{T as _e,a as Fe,b as K,c as v,d as Ve,e as b}from"./table-S3G5nGeW.js";import{p as L,L as Ps}from"./parseISO-CQytEdyk.js";import{P as ye}from"./plus-dvmosiY5.js";import{U as Ds}from"./users-CtKWnKNz.js";import{M as As}from"./monitor-D-74F3bU.js";import{C as W}from"./circle-check-BwwNu7gD.js";import{S as Rs}from"./search-Dt-WssL2.js";import{M as Xe}from"./map-pin-DIXgTodH.js";import{S as Ye}from"./square-pen-BHPFu4qu.js";import"./chevron-right-evuu7Lt6.js";/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ts=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],ee=_("circle-x",Ts);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Is=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],Os=_("funnel",Is);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ls=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],_s=_("history",Ls);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fs=[["path",{d:"M5 22h14",key:"ehvnwv"}],["path",{d:"M5 2h14",key:"pdyrp9"}],["path",{d:"M17 22v-4.172a2 2 0 0 0-.586-1.414L12 12l-4.414 4.414A2 2 0 0 0 7 17.828V22",key:"1d314k"}],["path",{d:"M7 2v4.172a2 2 0 0 0 .586 1.414L12 12l4.414-4.414A2 2 0 0 0 17 6.172V2",key:"1vvvr6"}]],Ze=_("hourglass",Fs);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vs=[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]],zs=_("mic",Vs);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qs=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]],we=_("panels-top-left",Qs);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hs=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Bs=_("settings",Hs);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $s=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]],We=_("trash",$s);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gs=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],Js=_("volume-2",Gs);var ke="Checkbox",[Us]=us(ke),[Ks,Be]=Us(ke);function Xs(l){const{__scopeCheckbox:f,checked:m,children:P,defaultChecked:j,disabled:o,form:w,name:n,onCheckedChange:N,required:R,value:I="on",internal_do_not_use_render:g}=l,[D,p]=bs({prop:m,defaultProp:j??!1,onChange:N,caller:ke}),[A,k]=r.useState(null),[H,h]=r.useState(null),C=r.useRef(!1),B=A?!!w||!!A.closest("form"):!0,se={checked:D,disabled:o,setChecked:p,control:A,setControl:k,name:n,form:w,value:I,hasConsumerStoppedPropagationRef:C,required:R,defaultChecked:Q(j)?!1:j,isFormControl:B,bubbleInput:H,setBubbleInput:h};return e.jsx(Ks,{scope:f,...se,children:Ys(g)?g(se):P})}var ss="CheckboxTrigger",as=r.forwardRef(({__scopeCheckbox:l,onKeyDown:f,onClick:m,...P},j)=>{const{control:o,value:w,disabled:n,checked:N,required:R,setControl:I,setChecked:g,hasConsumerStoppedPropagationRef:D,isFormControl:p,bubbleInput:A}=Be(ss,l),k=es(j,I),H=r.useRef(N);return r.useEffect(()=>{const h=o==null?void 0:o.form;if(h){const C=()=>g(H.current);return h.addEventListener("reset",C),()=>h.removeEventListener("reset",C)}},[o,g]),e.jsx(He.button,{type:"button",role:"checkbox","aria-checked":Q(N)?"mixed":N,"aria-required":R,"data-state":is(N),"data-disabled":n?"":void 0,disabled:n,value:w,...P,ref:k,onKeyDown:Ue(f,h=>{h.key==="Enter"&&h.preventDefault()}),onClick:Ue(m,h=>{g(C=>Q(C)?!0:!C),A&&p&&(D.current=h.isPropagationStopped(),D.current||h.stopPropagation())})})});as.displayName=ss;var ts=r.forwardRef((l,f)=>{const{__scopeCheckbox:m,name:P,checked:j,defaultChecked:o,required:w,disabled:n,value:N,onCheckedChange:R,form:I,...g}=l;return e.jsx(Xs,{__scopeCheckbox:m,checked:j,defaultChecked:o,disabled:n,required:w,onCheckedChange:R,name:P,form:I,value:N,internal_do_not_use_render:({isFormControl:D})=>e.jsxs(e.Fragment,{children:[e.jsx(as,{...g,ref:f,__scopeCheckbox:m}),D&&e.jsx(os,{__scopeCheckbox:m})]})})});ts.displayName=ke;var ls="CheckboxIndicator",rs=r.forwardRef((l,f)=>{const{__scopeCheckbox:m,forceMount:P,...j}=l,o=Be(ls,m);return e.jsx(ps,{present:P||Q(o.checked)||o.checked===!0,children:e.jsx(He.span,{"data-state":is(o.checked),"data-disabled":o.disabled?"":void 0,...j,ref:f,style:{pointerEvents:"none",...l.style}})})});rs.displayName=ls;var ns="CheckboxBubbleInput",os=r.forwardRef(({__scopeCheckbox:l,...f},m)=>{const{control:P,hasConsumerStoppedPropagationRef:j,checked:o,defaultChecked:w,required:n,disabled:N,name:R,value:I,form:g,bubbleInput:D,setBubbleInput:p}=Be(ns,l),A=es(m,p),k=Es(o),H=js(P);r.useEffect(()=>{const C=D;if(!C)return;const B=window.HTMLInputElement.prototype,F=Object.getOwnPropertyDescriptor(B,"checked").set,X=!j.current;if(k!==o&&F){const Ce=new Event("click",{bubbles:X});C.indeterminate=Q(o),F.call(C,Q(o)?!1:o),C.dispatchEvent(Ce)}},[D,k,o,j]);const h=r.useRef(Q(o)?!1:o);return e.jsx(He.input,{type:"checkbox","aria-hidden":!0,defaultChecked:w??h.current,required:n,disabled:N,name:R,value:I,form:g,...f,tabIndex:-1,ref:A,style:{...f.style,...H,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});os.displayName=ns;function Ys(l){return typeof l=="function"}function Q(l){return l==="indeterminate"}function is(l){return Q(l)?"indeterminate":l?"checked":"unchecked"}function ze({className:l,...f}){return e.jsx(ts,{"data-slot":"checkbox",className:vs("peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",l),...f,children:e.jsx(rs,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:e.jsx(Ss,{className:"size-3.5"})})})}const Qe={Volume2:Js,Mic:zs,Monitor:As,Laptop:Ps,Layout:we,Users:Ds},ga=()=>{const{user:l}=gs(),{platformName:f}=fs(),m=Ns(),[P,j]=r.useState(!1),[o,w]=r.useState(!1),[n,N]=r.useState(null),[R,I]=r.useState("agenda"),[g,D]=r.useState(!1),[p,A]=r.useState(new Date),[k,H]=r.useState("all"),[h,C]=r.useState("all"),[B,se]=r.useState(""),[F,X]=r.useState({name:"",totalQuantity:"",icon:"Layout"}),[Ce,$]=r.useState(!1),[Ee,ae]=r.useState(""),[cs,xe]=r.useState(null),[O,me]=r.useState(""),he=(l==null?void 0:l.role)==="ADMIN"||(l==null?void 0:l.role)==="CERIMONIAL",{data:d}=re({queryKey:["spaces-config"],queryFn:()=>T.getConfig().then(s=>s.data)}),{data:Y}=re({queryKey:["spaces"],queryFn:()=>T.getAll().then(s=>s.data)}),{data:M,isLoading:ds}=re({queryKey:["reservations",k,h],queryFn:()=>T.getReservations({status:k==="all"?void 0:k,spaceId:h==="all"?void 0:h}).then(s=>s.data)}),{data:i}=re({queryKey:["inventory"],queryFn:()=>ne.getAll().then(s=>s.data),enabled:!!l}),{data:te}=re({queryKey:["equipment-availability",p],queryFn:()=>ne.getAvailability(q(p,"yyyy-MM-dd")).then(s=>s.data),enabled:!!p}),Se=J({mutationFn:s=>T.createReservation(s),onSuccess:()=>{m.invalidateQueries(["reservations"]),j(!1),E.success("Solicitação enviada com sucesso!")},onError:s=>{var a,t;E.error(((t=(a=s.response)==null?void 0:a.data)==null?void 0:t.error)||"Erro ao enviar solicitação.")}}),$e=J({mutationFn:({id:s,data:a})=>T.updateReservationStatus(s,a),onSuccess:()=>{m.invalidateQueries(["reservations"]),E.success("Status atualizado!")},onError:s=>{var a,t;E.error(((t=(a=s.response)==null?void 0:a.data)==null?void 0:t.error)||"Erro ao atualizar status.")}}),Ge=J({mutationFn:s=>s.id?T.update(s.id,s):T.create(s),onSuccess:()=>{m.invalidateQueries(["spaces"]),w(!1),N(null),E.success("Local salvo com sucesso!")}}),xs=J({mutationFn:s=>T.delete(s),onSuccess:()=>{m.invalidateQueries(["spaces"]),E.success("Local removido.")}}),Me=J({mutationFn:s=>T.updateConfig(s),onSuccess:()=>{m.invalidateQueries(["spaces-config"]),E.success("Configurações salvas!")},onError:s=>{E.error("Erro ao salvar configurações.")}}),ue=J({mutationFn:s=>s.id?ne.update(s.id,s):ne.create(s),onSuccess:()=>{m.invalidateQueries(["inventory"]),m.invalidateQueries(["equipment-availability"]),E.success("Equipamento salvo!"),X({name:"",totalQuantity:"",icon:"Layout"})},onError:s=>{var a,t;E.error(((t=(a=s.response)==null?void 0:a.data)==null?void 0:t.error)||"Erro ao salvar equipamento.")}}),ms=J({mutationFn:s=>ne.delete(s),onSuccess:()=>{m.invalidateQueries(["inventory"]),E.success("Equipamento removido.")}}),pe=r.useMemo(()=>{if(!M)return{total:0,pending:0,approved:0,thisMonth:0};const s=new Date;return{total:M.length,pending:M.filter(a=>a.status==="PENDING").length,approved:M.filter(a=>a.status==="APPROVED").length,thisMonth:M.filter(a=>{const t=L(a.date);return t.getMonth()===s.getMonth()&&t.getFullYear()===s.getFullYear()}).length}},[M]),qe=r.useMemo(()=>M?M.filter(s=>ws(L(s.date),p)):[],[M,p]),hs=async()=>{try{const s=await T.exportReservations({status:k==="all"?void 0:k,spaceId:h==="all"?void 0:h}),a=window.URL.createObjectURL(new Blob([s.data])),t=document.createElement("a");t.href=a,t.setAttribute("download","reservas_espacos.csv"),document.body.appendChild(t),t.click(),t.remove()}catch{E.error("Erro ao exportar dados.")}},Je=s=>{const a={PENDING:{label:"Pendente",color:"bg-amber-100/80 text-amber-700 border-amber-200 shadow-sm",icon:Ze},APPROVED:{label:"Aprovado",color:"bg-emerald-100/80 text-emerald-700 border-emerald-200 shadow-sm",icon:W},REJECTED:{label:"Rejeitado",color:"bg-rose-100/80 text-rose-700 border-rose-200 shadow-sm",icon:ee},REALLOCATED:{label:"Realocado",color:"bg-blue-100/80 text-blue-700 border-blue-200 shadow-sm",icon:Xe}},t=a[s]||a.PENDING,y=t.icon;return e.jsxs(z,{className:`px-2 py-1 flex items-center gap-1.5 font-black uppercase text-[9px] tracking-wider border transition-all ${t.color}`,children:[e.jsx(y,{className:"h-3 w-3"}),t.label]})};return e.jsxs("div",{className:"space-y-6 max-w-[1400px] mx-auto p-4 md:p-6 pb-20 lg:pb-6",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between gap-6 pb-2 border-b",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("h1",{className:"text-4xl font-extrabold tracking-tight text-slate-900 dark:text-slate-100",children:"Gestão de Espaços"}),e.jsxs("p",{className:"text-slate-500 dark:text-slate-400 font-medium",children:["Coordenação e Reservas de Ambientes • ",f||"SEDUC Eventos"]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[he&&e.jsxs(u,{onClick:hs,variant:"outline",className:"gap-2 border-slate-200 shadow-sm",children:[e.jsx(ys,{className:"h-4 w-4"}),"Exportar CSV"]}),e.jsxs(Ae,{open:P,onOpenChange:j,children:[e.jsx(Cs,{asChild:!0,children:e.jsxs(u,{className:"bg-blue-600 hover:bg-blue-700 text-white font-bold gap-2 shadow-lg shadow-blue-100 dark:shadow-none transition-all hover:scale-[1.02]",children:[e.jsx(ye,{className:"h-5 w-5"}),"Nova Solicitação"]})}),e.jsxs(Re,{className:"sm:max-w-[700px]",children:[e.jsxs(Te,{children:[e.jsxs(Ie,{className:"text-2xl flex items-center gap-3",children:[e.jsx(be,{className:"h-6 w-6 text-blue-600"}),"Solicitar Espaço"]}),e.jsx(Ke,{children:"Reserve um ambiente para seu evento. A equipe do Cerimonial analisará seu pedido."})]}),e.jsxs("form",{onSubmit:s=>{s.preventDefault();const a=new FormData(s.target),t=Object.fromEntries(a.entries()),y={};i==null||i.forEach(x=>{y[x.id]=a.get(x.id)==="on"}),Se.mutate({...t,equipment:y,date:q(p,"yyyy-MM-dd"),needsCerimonial:g})},className:"grid gap-6 py-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:"Nome do Evento"}),e.jsx(S,{name:"eventTitle",placeholder:"Ex: Jornada Pedagógica",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:"Número do Chamado (1Doc)"}),e.jsx(S,{name:"oneDocNumber",placeholder:"Ex: 12345/2026",required:!0})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:"Setor Responsável"}),e.jsxs(ve,{name:"sector",required:!0,children:[e.jsx(ge,{children:e.jsx(fe,{placeholder:"Selecione..."})}),e.jsx(Ne,{children:d==null?void 0:d.sectors.map(s=>e.jsx(U,{value:s,children:s},s))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:"Local do Evento"}),e.jsxs(ve,{name:"spaceId",required:!0,children:[e.jsx(ge,{children:e.jsx(fe,{placeholder:"Selecione o local"})}),e.jsx(Ne,{children:Y==null?void 0:Y.map(s=>e.jsxs(U,{value:s.id,children:[s.name," (",s.capacity," pessoas)"]},s.id))})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:"Data do Evento"}),e.jsx(S,{name:"date",type:"date",value:q(p,"yyyy-MM-dd"),onChange:s=>A(L(s.target.value)),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:"Início"}),e.jsx(S,{name:"startTime",type:"time",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:"Término"}),e.jsx(S,{name:"endTime",type:"time",required:!0})]})]}),e.jsxs("div",{className:"space-y-4 pt-2 border-t",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(c,{className:"text-base font-bold",children:"Apoio do Cerimonial"}),e.jsx("p",{className:"text-xs text-slate-500",children:"Solicitar presença de um cerimonialista no evento."})]}),e.jsx(ze,{checked:g,onCheckedChange:D,className:"h-6 w-6"})]}),g&&e.jsxs("div",{className:"space-y-2 animate-in fade-in slide-in-from-top-1",children:[e.jsx(c,{className:"text-blue-600 font-bold",children:"Link da Minuta/Roteiro (Google Docs)"}),e.jsx(S,{name:"eventScriptUrl",placeholder:"https://docs.google.com/document/d/...",required:g}),e.jsx("p",{className:"text-[10px] text-slate-400 italic",children:"* Certifique-se de que o documento esteja público ou compartilhado com o cerimonial."})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:"Descrição"}),e.jsx(Le,{name:"description",placeholder:"Objetivo do evento e observações...",rows:3})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(c,{className:"text-base font-semibold",children:"Equipamentos e Serviços"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:[(i||[]).filter(s=>{const a=(d==null?void 0:d.equipment)||[];return a.some(y=>i.some(x=>x.id===y))?a.includes(s.id):!0}).map(s=>{const a=Qe[s.icon]||we;return e.jsxs("div",{className:"flex items-center space-x-2 border rounded-xl p-3 hover:bg-blue-50 dark:hover:bg-slate-800 transition-colors border-slate-200",children:[e.jsx(ze,{id:s.id,name:s.id}),e.jsxs(c,{htmlFor:s.id,className:"flex items-center gap-2 cursor-pointer font-medium text-sm",children:[e.jsx(a,{className:"h-4 w-4 text-blue-500"}),s.name]})]},s.id)}),(i==null?void 0:i.length)===0&&e.jsx("p",{className:"text-xs text-slate-400 col-span-full italic",children:"Nenhum equipamento cadastrado no inventário."})]})]}),e.jsx(Oe,{children:e.jsx(u,{type:"submit",disabled:Se.isPending,className:"w-full h-12 text-lg bg-blue-600 hover:bg-blue-700",children:Se.isPending?"Processando...":"Enviar Solicitação"})})]})]})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[{label:"Total Geral",value:pe.total,color:"blue",icon:be},{label:"Pendentes",value:pe.pending,color:"amber",icon:Ze},{label:"Aprovados",value:pe.approved,color:"green",icon:W},{label:"Ocupação/Mês",value:pe.thisMonth,color:"purple",icon:Bs}].map((s,a)=>e.jsxs(V,{className:`border-none shadow-sm bg-${s.color}-500 text-white overflow-hidden relative`,children:[e.jsxs("div",{className:"p-5 relative z-10",children:[e.jsx("p",{className:`text-${s.color}-50 text-xs font-bold uppercase tracking-wider`,children:s.label}),e.jsx("h3",{className:"text-3xl font-black mt-1",children:s.value})]}),e.jsx(s.icon,{className:"absolute -right-4 -bottom-4 h-24 w-24 text-white opacity-10"})]},a))}),e.jsxs(Ms,{defaultValue:"agenda",className:"w-full",onValueChange:I,children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4 mb-4",children:[e.jsxs(qs,{className:"bg-slate-100 dark:bg-slate-800 p-1 h-auto grid grid-cols-2 lg:flex w-full md:w-auto",children:[e.jsx(ce,{value:"agenda",className:"data-[state=active]:bg-white dark:data-[state=active]:bg-slate-950 py-2 px-6",children:"Agenda"}),e.jsx(ce,{value:"pedidos",className:"data-[state=active]:bg-white py-2 px-6",children:"Pedidos"}),he&&e.jsxs(e.Fragment,{children:[e.jsx(ce,{value:"locais",className:"data-[state=active]:bg-white py-2 px-6",children:"Locais"}),e.jsx(ce,{value:"inventario",className:"data-[state=active]:bg-white py-2 px-6",children:"Inventário"}),e.jsx(ce,{value:"config",className:"data-[state=active]:bg-white py-2 px-6",children:"Formulário"})]})]}),(R==="agenda"||R==="pedidos")&&e.jsxs("div",{className:"flex items-center gap-2 w-full md:w-auto",children:[e.jsxs("div",{className:"relative flex-1 md:w-64",children:[e.jsx(Rs,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-400"}),e.jsx(S,{placeholder:"Buscar evento...",className:"pl-10 h-10 border-slate-200",value:B,onChange:s=>se(s.target.value)})]}),e.jsxs(ve,{value:k,onValueChange:H,children:[e.jsxs(ge,{className:"w-[140px] h-10",children:[e.jsx(Os,{className:"h-4 w-4 mr-2"}),e.jsx(fe,{placeholder:"Status"})]}),e.jsxs(Ne,{children:[e.jsx(U,{value:"all",children:"Todos"}),e.jsx(U,{value:"PENDING",children:"Pendentes"}),e.jsx(U,{value:"APPROVED",children:"Aprovados"}),e.jsx(U,{value:"REJECTED",children:"Rejeitados"})]})]})]})]}),e.jsx(de,{value:"agenda",className:"m-0",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8 mt-6",children:[e.jsx("div",{className:"lg:col-span-4",children:e.jsxs(V,{className:"border-none shadow-md overflow-hidden bg-white dark:bg-slate-950",children:[e.jsx(oe,{className:"bg-blue-600 text-white p-6",children:e.jsxs(ie,{className:"text-xl flex items-center gap-2",children:[e.jsx(be,{className:"h-5 w-5"}),q(p,"MMMM yyyy",{locale:De})]})}),e.jsx(Z,{className:"p-4",children:e.jsx(ks,{mode:"single",selected:p,onSelect:s=>s&&A(s),className:"w-full",locale:De})})]})}),e.jsxs("div",{className:"lg:col-span-8 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-black text-slate-800 dark:text-slate-100 italic",children:q(p,"EEEE, dd 'de' MMMM",{locale:De})}),e.jsxs(z,{variant:"secondary",className:"bg-slate-200 text-slate-800",children:[qe.length," Eventos"]})]}),e.jsx("div",{className:"bg-white dark:bg-slate-950 border rounded-3xl overflow-hidden shadow-xl min-h-[600px]",children:ds?e.jsx("div",{className:"flex items-center justify-center h-[600px] bg-slate-50/50 backdrop-blur-sm",children:e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx("div",{className:"animate-spin h-8 w-8 border-4 border-blue-600 border-t-transparent rounded-full"}),e.jsx("p",{className:"text-slate-500 font-bold",children:"Sincronizando compromissos..."})]})}):qe.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center h-[600px] text-center p-8",children:[e.jsx("div",{className:"h-24 w-24 bg-slate-50 dark:bg-slate-900 rounded-full flex items-center justify-center shadow-inner mb-6",children:e.jsx(be,{className:"h-12 w-12 text-slate-300"})}),e.jsx("h3",{className:"text-2xl font-black text-slate-900 dark:text-slate-100 mb-2 italic",children:"Agenda Livre"}),e.jsx("p",{className:"text-slate-500 max-w-sm mx-auto font-medium",children:"Não há eventos registrados para este dia. Que tal iniciar uma nova solicitação?"}),e.jsxs(u,{className:"mt-8 bg-blue-600 hover:bg-blue-700 h-12 px-8 rounded-2xl shadow-lg shadow-blue-200 transition-all hover:scale-105",onClick:()=>j(!0),children:[e.jsx(ye,{className:"h-5 w-5 mr-2"}),"Nova Solicitação"]})]}):e.jsx("div",{className:"p-6 space-y-6 max-h-[800px] overflow-y-auto custom-scrollbar",children:qe.sort((s,a)=>(s.startTime||"").localeCompare(a.startTime||"")).map(s=>{var y;const a=L(s.startTime),t=L(s.endTime);return e.jsx("div",{className:"relative group animate-in fade-in slide-in-from-bottom-4 duration-300",children:e.jsxs("div",{className:"flex gap-6",children:[e.jsxs("div",{className:"w-24 flex-shrink-0 pt-2 text-right",children:[e.jsx("div",{className:"text-lg font-black text-slate-900 dark:text-white leading-none",children:a?q(a,"HH:mm"):"--:--"}),e.jsxs("div",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest mt-1",children:["até ",t?q(t,"HH:mm"):"--:--"]})]}),e.jsxs("div",{className:"relative flex flex-col items-center",children:[e.jsx("div",{className:`h-4 w-4 rounded-full border-4 border-white dark:border-slate-950 shadow-md z-10 
                                                                ${s.status==="APPROVED"?"bg-emerald-500":"bg-amber-500"}`}),e.jsx("div",{className:"flex-1 w-0.5 bg-slate-100 dark:bg-slate-800 absolute top-4 bottom-0 -z-0"})]}),e.jsxs("div",{className:`flex-1 rounded-3xl p-5 border-2 transition-all hover:shadow-xl hover:-translate-y-1
                                                            ${s.status==="APPROVED"?"bg-emerald-50/30 border-emerald-100 dark:bg-emerald-950/10 dark:border-emerald-900/30":"bg-amber-50/30 border-amber-100 dark:bg-amber-950/10 dark:border-amber-900/30"}`,children:[e.jsxs("div",{className:"flex items-start justify-between gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h4",{className:"text-xl font-black text-slate-900 dark:text-white tracking-tight",children:s.eventTitle}),Je(s.status)]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-xs font-bold text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/20 px-2 py-0.5 rounded-lg uppercase",children:s.sector}),e.jsxs("span",{className:"text-[10px] font-black text-slate-400 uppercase tracking-tighter",children:["1Doc: ",s.oneDocNumber||"N/A"]})]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("div",{className:"flex flex-col items-end gap-1",children:[e.jsxs("span",{className:"text-xs font-bold text-slate-500 flex items-center gap-1.5",children:[e.jsx(Xe,{className:"h-3.5 w-3.5 text-rose-500"}),(y=s.space)==null?void 0:y.name]}),e.jsxs("span",{className:"text-[10px] font-black text-slate-400 uppercase",children:["Sol: ",s.requesterName]})]})})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[s.needsCerimonial&&e.jsx(z,{variant:"outline",className:"bg-indigo-50 text-indigo-600 border-indigo-100 text-[10px] font-black uppercase",children:"Apoio Cerimonial"}),s.equipment&&Object.entries(s.equipment).map(([x,le])=>{if(!le)return null;const G=i==null?void 0:i.find(Pe=>Pe.id===x);return e.jsx(z,{variant:"outline",className:"text-[10px] bg-slate-50/50 text-slate-500 font-bold",children:(G==null?void 0:G.name)||x},x)})]}),s.observations&&e.jsxs("div",{className:`p-4 rounded-2xl border flex gap-3 animate-in zoom-in-95 duration-500
                                                                    ${s.status==="REJECTED"?"bg-rose-50 border-rose-100 text-rose-700":"bg-blue-50 border-blue-100 text-blue-700"}`,children:[e.jsx("div",{className:"h-8 w-8 rounded-full bg-white flex items-center justify-center flex-shrink-0 shadow-sm border border-inherit",children:s.status==="REJECTED"?e.jsx(ee,{className:"h-4 w-4"}):e.jsx(W,{className:"h-4 w-4"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] font-black uppercase tracking-widest mb-1 opacity-70",children:"Nota do Gestor"}),e.jsxs("p",{className:"text-sm font-medium italic",children:['"',s.observations,'"']})]})]}),he&&s.status==="PENDING"&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-100 dark:border-slate-800 flex gap-3",children:[e.jsxs(u,{size:"sm",variant:"outline",className:"h-9 px-4 rounded-xl text-rose-600 border-rose-200 hover:bg-rose-50",onClick:x=>{x.stopPropagation(),xe(s),me("REJECTED"),ae(""),$(!0)},children:[e.jsx(ee,{className:"h-4 w-4 mr-2"}),"Indisponibilizar"]}),e.jsxs(u,{size:"sm",className:"h-9 px-4 rounded-xl bg-emerald-600 hover:bg-emerald-700 shadow-md shadow-emerald-100",onClick:x=>{x.stopPropagation(),xe(s),me("APPROVED"),ae(""),$(!0)},children:[e.jsx(W,{className:"h-4 w-4 mr-2"}),"Aprovar Espaço"]})]})]})]})},s.id)})})})]})]})}),e.jsx(de,{value:"pedidos",children:e.jsx(V,{className:"border-none shadow-md overflow-hidden bg-white dark:bg-slate-950",children:e.jsxs(_e,{children:[e.jsx(Fe,{className:"bg-slate-50 dark:bg-slate-900 border-b",children:e.jsxs(K,{children:[e.jsx(v,{className:"font-bold",children:"Evento"}),e.jsx(v,{className:"font-bold",children:"Solicitante"}),e.jsx(v,{className:"font-bold",children:"Apoios"}),e.jsx(v,{className:"font-bold",children:"Data/Hora"}),e.jsx(v,{className:"font-bold",children:"Local"}),e.jsx(v,{className:"font-bold text-center",children:"Status"}),e.jsx(v,{className:"font-bold text-right",children:"Ações"})]})}),e.jsx(Ve,{children:M==null?void 0:M.filter(s=>s.eventTitle.toLowerCase().includes(B.toLowerCase())||s.requesterName.toLowerCase().includes(B.toLowerCase())).map(s=>{var a;return e.jsxs(K,{children:[e.jsxs(b,{children:[e.jsx("div",{className:"font-bold",children:s.eventTitle}),e.jsxs("div",{className:"text-[10px] text-slate-400 font-bold uppercase",children:["1Doc: ",s.oneDocNumber||"N/A"]}),e.jsx("div",{className:"text-[10px] text-slate-500 uppercase",children:s.sector})]}),e.jsx(b,{className:"text-sm font-medium",children:s.requesterName}),e.jsx(b,{children:e.jsxs("div",{className:"flex flex-wrap gap-1",children:[s.needsCerimonial&&e.jsx(z,{variant:"outline",className:"text-[10px] bg-blue-50 text-blue-600 border-blue-200",children:"Cerimonial"}),s.equipment&&Object.entries(s.equipment).map(([t,y])=>{if(!y)return null;const x=i==null?void 0:i.find(le=>le.id===t);return e.jsx(z,{variant:"outline",className:"text-[10px] bg-slate-50 text-slate-500 border-slate-200",children:(x==null?void 0:x.name)||t},t)})]})}),e.jsxs(b,{children:[e.jsx("div",{className:"text-sm font-bold",children:q(L(s.date),"dd/MM/yyyy")}),e.jsxs("div",{className:"text-xs text-slate-500 whitespace-nowrap",children:[q(L(s.startTime),"HH:mm")," - ",q(L(s.endTime),"HH:mm")]})]}),e.jsx(b,{className:"text-sm font-bold text-blue-600",children:(a=s.space)==null?void 0:a.name}),e.jsx(b,{className:"text-center",children:e.jsxs("div",{className:"flex flex-col items-center gap-1",children:[Je(s.status),s.observations&&e.jsxs("p",{className:"text-[10px] text-slate-400 italic font-medium max-w-[120px] truncate",title:s.observations,children:['"',s.observations,'"']})]})}),e.jsx(b,{className:"text-right",children:he?s.status==="PENDING"?e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsxs(u,{variant:"outline",size:"sm",className:"h-8 text-red-600 border-red-200 hover:bg-red-50",onClick:()=>{xe(s),me("REJECTED"),ae(""),$(!0)},children:[e.jsx(ee,{className:"h-4 w-4 mr-1"})," Rejeitar"]}),e.jsxs(u,{size:"sm",className:"h-8 bg-green-600 hover:bg-green-700",onClick:()=>{xe(s),me("APPROVED"),ae(""),$(!0)},children:[e.jsx(W,{className:"h-4 w-4 mr-1"})," Aprovar"]})]}):e.jsxs(u,{variant:"ghost",size:"sm",className:"h-8 text-slate-400 gap-1",onClick:()=>$e.mutate({id:s.id,data:{status:"PENDING"}}),children:[e.jsx(_s,{className:"h-4 w-4"})," Voltar para Pendente"]}):e.jsx("span",{className:"text-xs text-slate-400 italic font-medium",children:"Apenas Leitura"})})]},s.id)})})]})})}),e.jsxs(de,{value:"locais",children:[e.jsxs(V,{className:"border-none shadow-md bg-white dark:bg-slate-950",children:[e.jsxs(oe,{className:"flex flex-row items-center justify-between border-b bg-slate-50/50 dark:bg-slate-900/50 p-6",children:[e.jsxs("div",{children:[e.jsx(ie,{className:"text-xl font-black",children:"Auditórios e Salas"}),e.jsx(je,{children:"Gerencie os locais disponíveis para reserva."})]}),e.jsxs(u,{className:"bg-blue-600 font-bold gap-2",onClick:()=>{N(null),w(!0)},children:[e.jsx(ye,{className:"h-4 w-4"})," Novo Local"]})]}),e.jsx(Z,{className:"p-0",children:e.jsxs(_e,{children:[e.jsx(Fe,{children:e.jsxs(K,{children:[e.jsx(v,{children:"Nome"}),e.jsx(v,{children:"Capacidade"}),e.jsx(v,{children:"Localização"}),e.jsx(v,{className:"text-right",children:"Ações"})]})}),e.jsx(Ve,{children:Y==null?void 0:Y.map(s=>e.jsxs(K,{children:[e.jsx(b,{className:"font-bold text-slate-800 dark:text-slate-100",children:s.name}),e.jsxs(b,{className:"font-medium text-slate-600",children:[s.capacity," Pessoas"]}),e.jsx(b,{className:"text-slate-500 text-sm",children:s.location}),e.jsxs(b,{className:"text-right space-x-1",children:[e.jsx(u,{variant:"ghost",size:"icon",className:"h-8 w-8 text-blue-600",onClick:()=>{N(s),w(!0)},children:e.jsx(Ye,{className:"h-4 w-4"})}),e.jsx(u,{variant:"ghost",size:"icon",className:"h-8 w-8 text-red-600",onClick:()=>xs.mutate(s.id),children:e.jsx(We,{className:"h-4 w-4"})})]})]},s.id))})]})})]}),e.jsx(Ae,{open:o,onOpenChange:w,children:e.jsxs(Re,{children:[e.jsx(Te,{children:e.jsx(Ie,{children:n?"Editar Local":"Novo Local"})}),e.jsxs("form",{onSubmit:s=>{s.preventDefault();const a=new FormData(s.target);Ge.mutate({id:n==null?void 0:n.id,...Object.fromEntries(a.entries())})},className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:"Nome do Local"}),e.jsx(S,{name:"name",defaultValue:n==null?void 0:n.name,placeholder:"Ex: Auditório II",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:"Capacidade (Aprox.)"}),e.jsx(S,{name:"capacity",type:"number",defaultValue:n==null?void 0:n.capacity,required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:"Endereço/Bloco"}),e.jsx(S,{name:"location",defaultValue:n==null?void 0:n.location,placeholder:"Ex: Bloco A - Primeiro Andar"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:"Descrição"}),e.jsx(Le,{name:"description",defaultValue:n==null?void 0:n.description})]}),e.jsx(Oe,{children:e.jsx(u,{type:"submit",className:"w-full bg-blue-600",disabled:Ge.isPending,children:"Salvar Local"})})]})]})})]}),e.jsx(de,{value:"inventario",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[e.jsxs(V,{className:"lg:col-span-1 border-none shadow-md bg-white dark:bg-slate-950 h-fit",children:[e.jsxs(oe,{className:"bg-slate-50 dark:bg-slate-900/50 border-b",children:[e.jsx(ie,{className:"text-lg font-bold",children:"Gestão de Itens"}),e.jsx(je,{children:"Cadastre a quantidade total disponível."})]}),e.jsx(Z,{className:"p-4",children:e.jsxs("form",{onSubmit:s=>{s.preventDefault(),ue.mutate({...F,totalQuantity:parseInt(F.totalQuantity)||0})},className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:"Nome do Equipamento"}),e.jsx(S,{value:F.name,onChange:s=>X(a=>({...a,name:s.target.value})),placeholder:"Ex: Projetor Epson",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:"Qtd. Total em Estoque"}),e.jsx(S,{type:"number",value:F.totalQuantity,onChange:s=>X(a=>({...a,totalQuantity:s.target.value})),placeholder:"0",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:"Ícone (Lucide)"}),e.jsxs(ve,{value:F.icon,onValueChange:s=>X(a=>({...a,icon:s})),children:[e.jsx(ge,{children:e.jsx(fe,{})}),e.jsx(Ne,{children:Object.keys(Qe).map(s=>e.jsx(U,{value:s,children:s},s))})]})]}),e.jsx(u,{type:"submit",className:"w-full bg-blue-600 font-bold",disabled:ue.isPending,children:ue.isPending?"Salvando...":"Adicionar ao Estoque"})]})})]}),e.jsxs("div",{className:"lg:col-span-3 space-y-6",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:i==null?void 0:i.map(s=>e.jsx(V,{className:"border-none shadow-sm hover:shadow-md transition-shadow",children:e.jsxs(Z,{className:"p-5 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"h-12 w-12 bg-blue-50 dark:bg-slate-800 rounded-2xl flex items-center justify-center",children:(()=>{const a=Qe[s.icon]||we;return e.jsx(a,{className:"h-6 w-6 text-blue-600"})})()}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-slate-900 dark:text-slate-100",children:s.name}),e.jsxs("p",{className:"text-xs text-slate-500 font-medium tracking-tight",children:["Capacidade total: ",s.totalQuantity," unidades"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(u,{variant:"ghost",size:"icon",className:"h-8 w-8 text-blue-600",onClick:()=>{const a=window.prompt(`Nova quantidade para ${s.name}:`,s.totalQuantity);a!==null&&ue.mutate({...s,totalQuantity:a})},children:e.jsx(Ye,{className:"h-4 w-4"})}),e.jsx(u,{variant:"ghost",size:"icon",className:"h-8 w-8 text-red-500",onClick:()=>ms.mutate(s.id),children:e.jsx(We,{className:"h-4 w-4"})})]})]})},s.id))}),e.jsxs(V,{className:"border-none shadow-md bg-white dark:bg-slate-950",children:[e.jsxs(oe,{className:"flex flex-row items-center justify-between border-b bg-slate-50/50 p-6",children:[e.jsxs("div",{children:[e.jsx(ie,{className:"text-xl font-black",children:"Disponibilidade por Dia"}),e.jsxs(je,{children:["Ocupação dos itens em ",q(p,"dd/MM/yyyy")]})]}),e.jsx(S,{type:"date",className:"w-40",value:q(p,"yyyy-MM-dd"),onChange:s=>A(L(s.target.value))})]}),e.jsx(Z,{className:"p-0",children:e.jsxs(_e,{children:[e.jsx(Fe,{children:e.jsxs(K,{children:[e.jsx(v,{children:"Item"}),e.jsx(v,{className:"text-center",children:"Total"}),e.jsx(v,{className:"text-center",children:"Em Uso"}),e.jsx(v,{className:"text-center",children:"Disponível"}),e.jsx(v,{className:"text-right",children:"Status"})]})}),e.jsxs(Ve,{children:[te==null?void 0:te.map(s=>e.jsxs(K,{children:[e.jsx(b,{className:"font-bold",children:s.name}),e.jsx(b,{className:"text-center font-medium",children:s.totalQuantity}),e.jsx(b,{className:"text-center text-red-500 font-bold",children:s.used}),e.jsx(b,{className:"text-center text-green-600 font-bold",children:s.available}),e.jsx(b,{className:"text-right",children:e.jsx(z,{className:s.available>0?"bg-green-100 text-green-700":"bg-red-100 text-red-700",children:s.available>0?"Disponível":"Esgotado"})})]},s.id)),(!te||te.length===0)&&e.jsx(K,{children:e.jsx(b,{colSpan:5,className:"text-center py-8 text-slate-400 font-medium italic",children:"Nenhum equipamento cadastrado."})})]})]})})]})]})]})}),e.jsx(de,{value:"config",children:e.jsxs(V,{className:"border-none shadow-md bg-white dark:bg-slate-950",children:[e.jsxs(oe,{className:"bg-slate-50 dark:bg-slate-900/50 border-b",children:[e.jsx(ie,{className:"text-xl font-black italic",children:"Setores do Formulário"}),e.jsx(je,{children:"Edite a lista de setores responsáveis que aparecem para o organizador."})]}),e.jsxs(Z,{className:"p-6 space-y-8",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx(c,{className:"text-lg font-bold",children:"Equipamentos Habilitados no Formulário"}),e.jsx("p",{className:"text-sm text-slate-500",children:"Selecione quais itens do inventário aparecerão para os usuários."}),e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-3 gap-3",children:[i==null?void 0:i.map(s=>{var t;const a=(t=d==null?void 0:d.equipment)==null?void 0:t.includes(s.id);return e.jsxs("div",{className:`flex items-center space-x-2 border rounded-xl p-3 transition-colors ${a?"bg-blue-50 border-blue-200 dark:bg-blue-900/20":"bg-slate-50 border-slate-200"}`,children:[e.jsx(ze,{id:`config-${s.id}`,checked:a,onCheckedChange:y=>{const x=((d==null?void 0:d.equipment)||[]).filter(G=>i.some(Pe=>Pe.id===G)),le=y?[...x,s.id]:x.filter(G=>G!==s.id);Me.mutate({...d,equipment:le})}}),e.jsx(c,{htmlFor:`config-${s.id}`,className:"text-sm font-semibold cursor-pointer flex-1",children:s.name})]},s.id)}),(!i||i.length===0)&&e.jsxs("div",{className:"col-span-full p-6 border border-dashed rounded-xl flex flex-col items-center gap-2 bg-slate-50",children:[e.jsx(we,{className:"h-8 w-8 text-slate-300"}),e.jsx("p",{className:"text-sm text-slate-500 font-medium",children:"Cadastre itens no Inventário primeiro."})]})]})]}),e.jsxs("div",{className:"space-y-4 pt-8 border-t",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(c,{className:"text-lg font-bold",children:"Setores Responsáveis"}),e.jsx(u,{size:"sm",variant:"outline",onClick:()=>{const s=window.prompt("Nome do Setor:");if(s){const a=[...(d==null?void 0:d.sectors)||[],s];Me.mutate({...d,sectors:a})}},children:e.jsx(ye,{className:"h-4 w-4"})})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:d==null?void 0:d.sectors.map((s,a)=>e.jsxs(z,{variant:"secondary",className:"px-3 py-1 gap-2 bg-white border border-slate-200",children:[s,e.jsx("button",{className:"text-red-500",onClick:()=>{const t=d.sectors.filter((y,x)=>x!==a);Me.mutate({...d,sectors:t})},children:e.jsx(ee,{className:"h-3 w-3"})})]},a))})]})]})]})})]}),e.jsx(Ae,{open:Ce,onOpenChange:$,children:e.jsxs(Re,{children:[e.jsxs(Te,{children:[e.jsx(Ie,{className:"flex items-center gap-2",children:O==="APPROVED"?e.jsxs(e.Fragment,{children:[e.jsx(W,{className:"h-5 w-5 text-green-600"})," Aprovar com Observação"]}):e.jsxs(e.Fragment,{children:[e.jsx(ee,{className:"h-5 w-5 text-red-600"})," Motivo da Rejeição"]})}),e.jsx(Ke,{children:O==="APPROVED"?"Adicione alguma observação importante para o solicitante (opcional).":"Por favor, informe ao organizador o motivo pelo qual a solicitação foi negada."})]}),e.jsxs("div",{className:"py-4",children:[e.jsx(c,{htmlFor:"observation",className:"mb-2 block font-bold",children:O==="APPROVED"?"Observações Internas/Externas":"Motivo"}),e.jsx(Le,{id:"observation",placeholder:O==="APPROVED"?"Ex: Aprovado, mas o projetor do local está em manutenção...":"Ex: O local já estará ocupado por uma manutenção preventiva...",value:Ee,onChange:s=>ae(s.target.value),rows:4,required:O==="REJECTED"})]}),e.jsxs(Oe,{className:"gap-2 sm:gap-0",children:[e.jsx(u,{variant:"ghost",onClick:()=>$(!1),children:"Cancelar"}),e.jsxs(u,{className:O==="APPROVED"?"bg-green-600 hover:bg-green-700":"bg-red-600 hover:bg-red-700",onClick:()=>{if(O==="REJECTED"&&!Ee){E.error("O motivo da rejeição é obrigatório.");return}$e.mutate({id:cs.id,data:{status:O,observations:Ee}}),$(!1)},children:["Confirmar ",O==="APPROVED"?"Aprovação":"Rejeição"]})]})]})})]})};export{ga as default};
