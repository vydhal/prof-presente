import{ae as P,b as S,r as t,j as e,s as C,L as k,B as l,c as E,aF as A,v as L}from"./index-BklJB83-.js";import{I as u}from"./input-D985NYo-.js";import{L as w}from"./label-tnVTU4ew.js";import{C as f,d as p,a as D,b as I,c as F}from"./card-DDG5aQ8T.js";import{A as O,a as R}from"./alert-Bqlpc-Um.js";import{E as q}from"./eye-off-CrFarNK1.js";import{E as z}from"./eye-1zQgUw0t.js";const M=()=>{const[b]=P(),o=b.get("token"),j=S(),[s,g]=t.useState({newPassword:"",confirmPassword:""}),[n,N]=t.useState(!1),[i,d]=t.useState(!1),[c,a]=t.useState(""),h=r=>{g({...s,[r.target.name]:r.target.value})},v=async r=>{var m,x;if(r.preventDefault(),a(""),s.newPassword!==s.confirmPassword){a("As senhas não coincidem.");return}if(s.newPassword.length<6){a("A senha deve ter pelo menos 6 caracteres.");return}d(!0);try{await A.resetPassword({token:o,newPassword:s.newPassword}),L.success("Senha redefinida com sucesso!"),j("/login")}catch(y){a(((x=(m=y.response)==null?void 0:m.data)==null?void 0:x.error)||"Erro ao redefinir senha. O link pode ter expirado.")}finally{d(!1)}};return o?e.jsxs("div",{className:"auth-container min-h-screen flex items-center justify-center p-4",children:[e.jsxs("div",{className:"fixed inset-0 overflow-hidden -z-10 pointer-events-none",children:[e.jsx("div",{className:"absolute -top-[10%] -right-[10%] w-[40%] h-[40%] bg-blue-500/10 blur-[120px] rounded-full"}),e.jsx("div",{className:"absolute -bottom-[10%] -left-[10%] w-[40%] h-[40%] bg-purple-500/10 blur-[120px] rounded-full"})]}),e.jsxs("div",{className:"w-full max-w-md",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"Nova Senha"}),e.jsx("p",{className:"text-gray-400",children:"Escolha uma senha forte para sua segurança"})]}),e.jsxs(f,{className:"bg-slate-900/50 backdrop-blur-xl border-white/10 shadow-2xl",children:[e.jsxs(D,{children:[e.jsx(I,{className:"text-xl text-white",children:"Redefinir Senha"}),e.jsx(F,{className:"text-gray-400",children:"Insira sua nova senha abaixo."})]}),e.jsx(p,{children:e.jsxs("form",{onSubmit:v,className:"space-y-6",children:[c&&e.jsx(O,{variant:"destructive",className:"bg-red-500/10 border-red-500/20 text-red-400",children:e.jsx(R,{children:c})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(w,{htmlFor:"newPassword",title:"text-gray-300",children:"Nova Senha"}),e.jsxs("div",{className:"relative",children:[e.jsx(u,{id:"newPassword",name:"newPassword",type:n?"text":"password",value:s.newPassword,onChange:h,className:"bg-white/5 border-white/10 text-white placeholder:text-gray-600 focus:ring-blue-500/50",required:!0}),e.jsx(l,{type:"button",variant:"ghost",size:"icon",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent text-gray-500",onClick:()=>N(!n),children:n?e.jsx(q,{className:"h-4 w-4"}):e.jsx(z,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(w,{htmlFor:"confirmPassword",title:"text-gray-300",children:"Confirmar Nova Senha"}),e.jsx(u,{id:"confirmPassword",name:"confirmPassword",type:"password",value:s.confirmPassword,onChange:h,className:"bg-white/5 border-white/10 text-white placeholder:text-gray-600 focus:ring-blue-500/50",required:!0})]}),e.jsxs(l,{type:"submit",className:"w-full bg-blue-600 hover:bg-blue-700 text-white shadow-lg shadow-blue-500/20",disabled:i,children:[i?e.jsx(E,{className:"mr-2 h-4 w-4 animate-spin"}):null,"Salvar Nova Senha"]})]})})]})]})]}):e.jsx("div",{className:"auth-container min-h-screen flex items-center justify-center p-4",children:e.jsx(f,{className:"max-w-md w-full text-center bg-slate-900/50 backdrop-blur-xl border-white/10 shadow-2xl",children:e.jsxs(p,{className:"pt-10 pb-10 space-y-6",children:[e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"p-3 bg-red-500/10 rounded-full",children:e.jsx(C,{className:"h-12 w-12 text-red-500"})})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:"link Inválido"}),e.jsx("p",{className:"text-gray-400",children:"O token de redefinição não foi encontrado ou é inválido."})]}),e.jsx(k,{to:"/login",className:"block",children:e.jsx(l,{variant:"outline",className:"w-full",children:"Voltar para o Login"})})]})})})};export{M as default};
